<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Integrate with Microsoft - Federated Directory</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-5FT2Y1PF6Z"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5FT2Y1PF6Z', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Integrate with Microsoft | Federated Directory</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Integrate with Microsoft" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="https://help.federated.directory/administrator/microsoft.html" /> <meta property="og:url" content="https://help.federated.directory/administrator/microsoft.html" /> <meta property="og:site_name" content="Federated Directory" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Integrate with Microsoft" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Integrate with Microsoft","url":"https://help.federated.directory/administrator/microsoft.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://help.federated.directory/" class="site-title lh-tight"><div class=site-logo> <!-- <img alt="logo" src="/assets/images/FederatedDirectory_logo.svg"> --> </div> <!-- Cloudflare Web Analytics --> <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "0fcf87fd8af848d6abbe256323c53378"}'></script><!-- End Cloudflare Web Analytics --></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://help.federated.directory/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="https://help.federated.directory/getting-started.html" class="nav-list-link">Getting started</a></li><li class="nav-list-item"><a href="https://help.federated.directory/login.html" class="nav-list-link">Login</a></li><li class="nav-list-item"><a href="https://help.federated.directory/search.html" class="nav-list-link">Search</a></li><li class="nav-list-item"><a href="https://help.federated.directory/myaccount.html" class="nav-list-link">My Account</a></li><li class="nav-list-item"><a href="https://help.federated.directory/groups.html" class="nav-list-link">Groups</a></li><li class="nav-list-item"><a href="https://help.federated.directory/outlook-add-in.html" class="nav-list-link">Microsoft Outlook add-in</a></li><li class="nav-list-item"><a href="https://help.federated.directory/teams-app.html" class="nav-list-link">Microsoft Teams app</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://help.federated.directory/administrator/administrator.html" class="nav-list-link">Administrator</a><ul class="nav-list "><li class="nav-list-item "><a href="https://help.federated.directory/administrator/company.html" class="nav-list-link">Company</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/directories.html" class="nav-list-link">Directories</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/integrations.html" class="nav-list-link">Integrations</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/auditlogs.html" class="nav-list-link">Audit logs</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/google.html" class="nav-list-link">Integrate with Google</a></li><li class="nav-list-item active"><a href="https://help.federated.directory/administrator/microsoft.html" class="nav-list-link active">Integrate with Microsoft</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/okta.html" class="nav-list-link">Integrate with Okta</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/onelogin.html" class="nav-list-link">Integrate with OneLogin</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/oidc.html" class="nav-list-link">Integrate with OIDC</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/saml.html" class="nav-list-link">Integrate with SAML 2.0</a></li><li class="nav-list-item "><a href="https://help.federated.directory/administrator/scim.html" class="nav-list-link">Integrate with SCIM 2.0</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://help.federated.directory/developer/developer.html" class="nav-list-link">Developer</a><ul class="nav-list "><li class="nav-list-item "><a href="https://help.federated.directory/developer/getting-started.html" class="nav-list-link">Getting started</a></li><li class="nav-list-item "><a href="https://help.federated.directory/developer/obtaining-a-token.html" class="nav-list-link">Obtaining a token</a></li><li class="nav-list-item "><a href="https://help.federated.directory/developer/users-api.html" class="nav-list-link">Users API</a></li><li class="nav-list-item "><a href="https://help.federated.directory/developer/design-principles.html" class="nav-list-link">Design Principles</a></li></ul></li><li class="nav-list-item"><a href="https://help.federated.directory/contact-us.html" class="nav-list-link">Contact Us</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Federated Directory" aria-label="Search Federated Directory" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://help.federated.directory/administrator/administrator.html">Administrator</a></li> <li class="breadcrumb-nav-list-item"><span>Integrate with Microsoft</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="integrate-with-microsoft"> <a href="#integrate-with-microsoft" class="anchor-heading" aria-labelledby="integrate-with-microsoft"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integrate with Microsoft </h1> <p>In case your company uses Microsoft 365, your corporate address book resides in Azure AD.<br /> You can integrate Azure AD with Federated Directory.</p> <ul> <li><a href="#features">Features</a></li> <li><a href="#prerequisites">Prerequisites</a></li> <li><a href="#configuration-steps">Configuration steps</a></li> <li><a href="#known-limitations">Known limitations</a></li> </ul> <h2 id="features"> <a href="#features" class="anchor-heading" aria-labelledby="features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Features </h2> <h3 id="authentication-with-microsoft"> <a href="#authentication-with-microsoft" class="anchor-heading" aria-labelledby="authentication-with-microsoft"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentication with Microsoft </h3> <p>Enable Single Sign On authentication by using Microsoft as your identity provider.</p> <p>This removes the option to authenticate with your Federated Directory credentials but redirects the users to Microsoft for Authentication.</p> <h3 id="user-management-by-azure-ad"> <a href="#user-management-by-azure-ad" class="anchor-heading" aria-labelledby="user-management-by-azure-ad"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User management by Azure AD </h3> <p>The following provisioning features are supported when using provisioning from Azure AD to Federated Directory:</p> <ul> <li>Create Users: New or existing users in your Azure AD will be pushed to Federated Directory as new users.</li> <li>Update User Attributes: Updates to user profiles in your Azure AD will be pushed to Federated Directory.</li> <li>Deactivate Users: Users deactivated in your Azure AD will be automatically disabled in Federated Directory, but their contact data can still be found. If reactivated, users will regain access to Federated Directory.</li> </ul> <h2 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h2> <p>You will need to add Federated Directory as an Entreprise Application to your Azure AD. The easiest way to do this, is by signing up to Federated Directory with a Microsoft account with administrative privileges within your Azure AD.</p> <p>This will automatically create the Federated Directory enterprise application in your Azure AD.</p> <p><img style="width: 900px" src="../../assets/images/administrator-microsoft-azureadgalleryapp.png" alt="Add Federated Directory to Azure AD Enterprise Applications" /></p> <p><br /> In case you already signed up manually and want to integrate with Azure AD, you will have to perform the following three steps.</p> <ol> <li> <p>Inside your Federated Directory <a href="./directories">create a new directory</a> which will be integrated with your Microsoft environment. Switch the <code class="language-plaintext highlighter-rouge">Authentication method</code> to ‘Microsoft accounts’.</p> </li> <li> <p>Inside this new directory, create a new user. The username of this user should be <strong>identical</strong> to the user name (<code class="language-plaintext highlighter-rouge">userPrincipalName</code>) in Azure AD that you will use to logon to Federated Directory in the next step.</p> </li> <li> <p>Log out and go to the login screen. Here you should switch to the new directory you just created. Click on the button <code class="language-plaintext highlighter-rouge">Log in with your Microsoft account</code>. Microsoft will ask permissions to your profile. After approval you will log in as the user you just created and Federated Directory is created inside your Azure AD as an Enterprise Application.</p> </li> </ol> <h2 id="configuration-steps"> <a href="#configuration-steps" class="anchor-heading" aria-labelledby="configuration-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration steps </h2> <p>You are now ready to finalize the integration with Azure AD.</p> <h3 id="authentication-with-microsoft-1"> <a href="#authentication-with-microsoft-1" class="anchor-heading" aria-labelledby="authentication-with-microsoft-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentication with Microsoft </h3> <p>The steps you have taken in the <a href="#prerequisites">prerequisites</a> chapter are enough to enable authentication with a Microsoft account.</p> <p>The directory that contains your users, should be configured with <code class="language-plaintext highlighter-rouge">Authentication Method</code> set to ‘Microsoft Accounts’. The usernames of the users in this directory should be identical to the <code class="language-plaintext highlighter-rouge">userPrincipleName</code> of the Azure AD user.</p> <h3 id="user-management-by-microsoft"> <a href="#user-management-by-microsoft" class="anchor-heading" aria-labelledby="user-management-by-microsoft"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User management by Microsoft </h3> <p>The following attributes will be synchronized to Federated Directory:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Display Name</th> <th>Variable Name</th> <th>Mandatory</th> </tr> </thead> <tbody> <tr> <td>User Name</td> <td>userPrincipalName</td> <td>️️✔️</td> </tr> <tr> <td>Display name</td> <td>displayName</td> <td>✔️</td> </tr> <tr> <td>Given name</td> <td>givenName</td> <td> </td> </tr> <tr> <td>Last name</td> <td>surName</td> <td> </td> </tr> <tr> <td>Mail</td> <td>mail</td> <td> </td> </tr> <tr> <td>Office phone</td> <td>telephoneNumber</td> <td> </td> </tr> <tr> <td>Mobile Phone</td> <td>mobile</td> <td> </td> </tr> <tr> <td>Street address</td> <td>streetAddress</td> <td> </td> </tr> <tr> <td>City</td> <td>city</td> <td> </td> </tr> <tr> <td>State or province</td> <td>state</td> <td> </td> </tr> <tr> <td>ZIP or postal Code</td> <td>postalCode</td> <td> </td> </tr> <tr> <td>Country or region</td> <td>country</td> <td> </td> </tr> <tr> <td>Preferred language</td> <td>preferredLanguage</td> <td> </td> </tr> <tr> <td>Employee number</td> <td>employeeNumber</td> <td> </td> </tr> <tr> <td>Cost center</td> <td>costCenter</td> <td> </td> </tr> <tr> <td>Job title</td> <td>jobTitle</td> <td> </td> </tr> <tr> <td>Department</td> <td>department</td> <td> </td> </tr> <tr> <td>Manager</td> <td>manager</td> <td> </td> </tr> <tr> <td>Object ID</td> <td>objectId</td> <td> </td> </tr> </tbody> </table></div> <p>The first two attributes are mandatory, all other attributes can be disabled from provisioning in Azure AD.</p> <p>If you want to automatically provision your users and their profiles from Azure AD to Federated Directory.</p> <ol> <li>In Federated Directory, go back to the directory you want to integrate with Microsoft and select the “keys” tab.</li> <li>Create a new key. Give it a name, like “Microsoft integration key”. Once created, copy the “access token”. The “access token” is only shown one time, directly after the creation of a directory key. You will need it in step 5. <br /><img style="width: 900px" src="../../assets/images/administrator-microsoft-getdirectorykeytokeninfo.jpg" alt="Get directory key access token in Federated Directory" /><br /></li> <li>Go to the Azure AD portal &gt; Enterprise applications and select the Federated Directory application. (see <a href="#prerequisites">prerequisites</a> if you don’t see our application there).</li> <li>Go to “Provisioning” in the menu and click “Get started”</li> </ol> <p><img style="width: 900px" src="../../assets/images/administrator-microsoft-azureadprovisioning-step1.png" alt="Get started with Federated Directory provisioning" /><br /></p> <ol> <li>As soon as you click “Get started”, set “Provisioning Mode” to “Automatic” to get configuration screen:</li> </ol> <p><img style="width: 900px" src="../../assets/images/administrator-microsoft-azureadprovisioning-step2.png" alt="Enable Automatic Provisioning" /><br /></p> <ol> <li>Under <strong>Admin Credentials</strong> enter: <ul> <li>Tenant URL: <code class="language-plaintext highlighter-rouge">https://api.federated.directory/v2</code></li> <li>Secret Token: <em>The access token created in step 2</em></li> </ul> </li> <li>Click “Test Connection” to ensure the connection is working.</li> <li>At the bottom of the page, switch ‘Provisioning Status’ to <code class="language-plaintext highlighter-rouge">On</code>.</li> <li>Now you need to save configuration by clicking “Save” and re-enter this screen again: Click “Federated Directory” in breadcrumbs and “Edit Provisioning” button.</li> </ol> <p><img style="width: 900px" src="../../assets/images/administrator-microsoft-azureadprovisioning-step3.png" alt="Edit provisioning" /><br /></p> <ol> <li>In “Settings” accordion switch “Scope” to “Sync all users and groups”. If you want more control which Azure AD users are synced to Federated Directory, keep it at “Sync only assigned users and groups”.</li> </ol> <p><img style="width: 900px" src="../../assets/images/administrator-microsoft-azureadprovisioning-step4.png" alt="Sync all users and groups" /><br /></p> <ol> <li>Click “Save” button to persist the settings</li> </ol> <p>That is it. Your Azure AD users will now be synced to Federated Directory. Keep in mind that it could take Azure AD a couple of minutes (sometimes more than 30 minutes) to actually start provisioning the users to us. Look at the bottom of the provisioning page for the status.</p> <h2 id="known-limitations"> <a href="#known-limitations" class="anchor-heading" aria-labelledby="known-limitations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Known limitations </h2> <p>Microsoft user provisioning does not support the actual deletion of a user when a user is unassigned from the Federated Directory service in your Azure AD. At that point the user will be disabled in Federated Directory and will no longer be able to log in. The user will be deleted when the user is hard-deleted from Azure AD which typically happens if you manually delete the user from the Azure AD recycle bin OR if the user is left for more than 30 days in the Azure AD recycle bin which Microsoft will then auto delete.</p> <hr> <footer> Copyright &copy; 2024 <a href="https://www.federated.directory">Federated Directory</a>. </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
