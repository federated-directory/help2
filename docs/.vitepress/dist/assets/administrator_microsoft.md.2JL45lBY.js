import{_ as e,o as r,c as i,ag as o}from"./chunks/framework.Q1EpFJIG.js";const a="/images/administrator-microsoft-azureadgalleryapp.png",s="/images/administrator-microsoft-getdirectorykeytokeninfo.jpg",n="/images/administrator-microsoft-azureadprovisioning-step1.png",d="/images/administrator-microsoft-azureadprovisioning-step2.png",u="/images/administrator-microsoft-azureadprovisioning-step3.png",c="/images/administrator-microsoft-azureadprovisioning-step4.png",w=JSON.parse('{"title":"Integrate with Microsoft","description":"","frontmatter":{},"headers":[],"relativePath":"administrator/microsoft.md","filePath":"administrator/microsoft.md"}'),l={name:"administrator/microsoft.md"};function h(p,t,m,y,f,g){return r(),i("div",null,[...t[0]||(t[0]=[o('<h1 id="integrate-with-microsoft" tabindex="-1">Integrate with Microsoft <a class="header-anchor" href="#integrate-with-microsoft" aria-label="Permalink to &quot;Integrate with Microsoft&quot;">​</a></h1><p>In case your company uses Microsoft 365, your corporate address book resides in Azure AD.<br> You can integrate Azure AD with Federated Directory.</p><ul><li><a href="#features">Features</a></li><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#configuration-steps">Configuration steps</a></li><li><a href="#known-limitations">Known limitations</a></li></ul><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><h3 id="authentication-with-microsoft" tabindex="-1">Authentication with Microsoft <a class="header-anchor" href="#authentication-with-microsoft" aria-label="Permalink to &quot;Authentication with Microsoft&quot;">​</a></h3><p>Enable Single Sign On authentication by using Microsoft as your identity provider.</p><p>This removes the option to authenticate with your Federated Directory credentials but redirects the users to Microsoft for Authentication.</p><h3 id="user-management-by-azure-ad" tabindex="-1">User management by Azure AD <a class="header-anchor" href="#user-management-by-azure-ad" aria-label="Permalink to &quot;User management by Azure AD&quot;">​</a></h3><p>The following provisioning features are supported when using provisioning from Azure AD to Federated Directory:</p><ul><li>Create Users: New or existing users in your Azure AD will be pushed to Federated Directory as new users.</li><li>Update User Attributes: Updates to user profiles in your Azure AD will be pushed to Federated Directory.</li><li>Deactivate Users: Users deactivated in your Azure AD will be automatically disabled in Federated Directory, but their contact data can still be found. If reactivated, users will regain access to Federated Directory.</li></ul><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>You will need to add Federated Directory as an Entreprise Application to your Azure AD. The easiest way to do this, is by signing up to Federated Directory with a Microsoft account with administrative privileges within your Azure AD.</p><p>This will automatically create the Federated Directory enterprise application in your Azure AD.</p><img style="width:900px;" src="'+a+'" alt="Add Federated Directory to Azure AD Enterprise Applications"><br> In case you already signed up manually and want to integrate with Azure AD, you will have to perform the following three steps. <ol><li><p>Inside your Federated Directory <a href="./directories">create a new directory</a> which will be integrated with your Microsoft environment. Switch the <code>Authentication method</code> to &#39;Microsoft accounts&#39;.</p></li><li><p>Inside this new directory, create a new user. The username of this user should be <strong>identical</strong> to the user name (<code>userPrincipalName</code>) in Azure AD that you will use to logon to Federated Directory in the next step.</p></li><li><p>Log out and go to the login screen. Here you should switch to the new directory you just created. Click on the button <code>Log in with your Microsoft account</code>. Microsoft will ask permissions to your profile. After approval you will log in as the user you just created and Federated Directory is created inside your Azure AD as an Enterprise Application.</p></li></ol><h2 id="configuration-steps" tabindex="-1">Configuration steps <a class="header-anchor" href="#configuration-steps" aria-label="Permalink to &quot;Configuration steps&quot;">​</a></h2><p>You are now ready to finalize the integration with Azure AD.</p><h3 id="authentication-with-microsoft-1" tabindex="-1">Authentication with Microsoft <a class="header-anchor" href="#authentication-with-microsoft-1" aria-label="Permalink to &quot;Authentication with Microsoft&quot;">​</a></h3><p>The steps you have taken in the <a href="#prerequisites">prerequisites</a> chapter are enough to enable authentication with a Microsoft account.</p><p>The directory that contains your users, should be configured with <code>Authentication Method</code> set to &#39;Microsoft Accounts&#39;. The usernames of the users in this directory should be identical to the <code>userPrincipleName</code> of the Azure AD user.</p><h3 id="user-management-by-microsoft" tabindex="-1">User management by Microsoft <a class="header-anchor" href="#user-management-by-microsoft" aria-label="Permalink to &quot;User management by Microsoft&quot;">​</a></h3><p>The following attributes will be synchronized to Federated Directory:</p><table tabindex="0"><thead><tr><th>Display Name</th><th>Variable Name</th><th>Mandatory</th></tr></thead><tbody><tr><td>User Name</td><td>userPrincipalName</td><td>️️✔️</td></tr><tr><td>Display name</td><td>displayName</td><td>✔️</td></tr><tr><td>Given name</td><td>givenName</td><td></td></tr><tr><td>Last name</td><td>surName</td><td></td></tr><tr><td>Mail</td><td>mail</td><td></td></tr><tr><td>Office phone</td><td>telephoneNumber</td><td></td></tr><tr><td>Mobile Phone</td><td>mobile</td><td></td></tr><tr><td>Street address</td><td>streetAddress</td><td></td></tr><tr><td>City</td><td>city</td><td></td></tr><tr><td>State or province</td><td>state</td><td></td></tr><tr><td>ZIP or postal Code</td><td>postalCode</td><td></td></tr><tr><td>Country or region</td><td>country</td><td></td></tr><tr><td>Preferred language</td><td>preferredLanguage</td><td></td></tr><tr><td>Employee number</td><td>employeeNumber</td><td></td></tr><tr><td>Cost center</td><td>costCenter</td><td></td></tr><tr><td>Job title</td><td>jobTitle</td><td></td></tr><tr><td>Department</td><td>department</td><td></td></tr><tr><td>Manager</td><td>manager</td><td></td></tr><tr><td>Object ID</td><td>objectId</td><td></td></tr></tbody></table><p>The first two attributes are mandatory, all other attributes can be disabled from provisioning in Azure AD.</p><p>If you want to automatically provision your users and their profiles from Azure AD to Federated Directory.</p><ol><li>In Federated Directory, go back to the directory you want to integrate with Microsoft and select the &quot;keys&quot; tab.</li><li>Create a new key. Give it a name, like &quot;Microsoft integration key&quot;. Once created, copy the &quot;access token&quot;. The &quot;access token&quot; is only shown one time, directly after the creation of a directory key. You will need it in step 5. <br><img style="width:900px;" src="'+s+'" alt="Get directory key access token in Federated Directory"><br></li><li>Go to the Azure AD portal &gt; Enterprise applications and select the Federated Directory application. (see <a href="#prerequisites">prerequisites</a> if you don&#39;t see our application there).</li><li>Go to &quot;Provisioning&quot; in the menu and click &quot;Get started&quot;</li></ol><p><img style="width:900px;" src="'+n+'" alt="Get started with Federated Directory provisioning"><br></p><ol start="5"><li>As soon as you click &quot;Get started&quot;, set &quot;Provisioning Mode&quot; to &quot;Automatic&quot; to get configuration screen:</li></ol><p><img style="width:900px;" src="'+d+'" alt="Enable Automatic Provisioning"><br></p><ol start="6"><li>Under <strong>Admin Credentials</strong> enter: <ul><li>Tenant URL: <code>https://api.federated.directory/v2</code></li><li>Secret Token: <em>The access token created in step 2</em></li></ul></li><li>Click &quot;Test Connection&quot; to ensure the connection is working.</li><li>At the bottom of the page, switch &#39;Provisioning Status&#39; to <code>On</code>.</li><li>Now you need to save configuration by clicking &quot;Save&quot; and re-enter this screen again: Click &quot;Federated Directory&quot; in breadcrumbs and &quot;Edit Provisioning&quot; button.</li></ol><p><img style="width:900px;" src="'+u+'" alt="Edit provisioning"><br></p><ol start="10"><li>In &quot;Settings&quot; accordion switch &quot;Scope&quot; to &quot;Sync all users and groups&quot;. If you want more control which Azure AD users are synced to Federated Directory, keep it at &quot;Sync only assigned users and groups&quot;.</li></ol><p><img style="width:900px;" src="'+c+'" alt="Sync all users and groups"><br></p><ol start="11"><li>Click &quot;Save&quot; button to persist the settings</li></ol><p>That is it. Your Azure AD users will now be synced to Federated Directory. Keep in mind that it could take Azure AD a couple of minutes (sometimes more than 30 minutes) to actually start provisioning the users to us. Look at the bottom of the provisioning page for the status.</p><h2 id="known-limitations" tabindex="-1">Known limitations <a class="header-anchor" href="#known-limitations" aria-label="Permalink to &quot;Known limitations&quot;">​</a></h2><p>Microsoft user provisioning does not support the actual deletion of a user when a user is unassigned from the Federated Directory service in your Azure AD. At that point the user will be disabled in Federated Directory and will no longer be able to log in. The user will be deleted when the user is hard-deleted from Azure AD which typically happens if you manually delete the user from the Azure AD recycle bin OR if the user is left for more than 30 days in the Azure AD recycle bin which Microsoft will then auto delete.</p>',39)])])}const A=e(l,[["render",h]]);export{w as __pageData,A as default};
