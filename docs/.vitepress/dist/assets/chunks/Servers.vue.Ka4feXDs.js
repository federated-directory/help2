import{b as N,I as V,a as w,x as L}from"./Sidebar.vue.BKC06yhY.js";import{d as g,a as F,p as O}from"./SubpageHeader.vue.DoThBf5B.js";import{r as S,d as R,u as $,f as E}from"./index.nT-X51LW.js";import{w as y}from"./Form.vue.C_aOjbR8.js";import{d as U,o,c as k,F as j,E as u,b as h,e as B,h as f,w as s,k as b,a as M,j as A,B as H}from"./framework.Q1EpFJIG.js";import"./ScalarWrapper.tDm4ZA20.js";import"./DataTableRow.vue.mGjyHUBi.js";const I={class:"w-full"},K=U({__name:"ServerForm",setup(C){const{activeCollection:t,servers:p,serverMutators:v}=S(),m=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],d=R(),l=f(()=>{var e,a;return p[t.value&&d.params.server==="default"?(e=t.value)==null?void 0:e.spec.serverUids[0]:((a=t.value)==null?void 0:a.spec.serverUids.find(r=>r===d.params.server))??""]}),_=(e,a)=>{t.value&&v.edit(l.value.uid,e,a)},c=(e,a)=>{t.value&&v.edit(l.value.uid,`variables.${e}.value`,a)},n=f(()=>{var e;return Object.entries(((e=l.value)==null?void 0:e.variables)??{}).map(([a,r])=>{var i;return{key:a,label:a,placeholder:r.default??((i=r==null?void 0:r.enum)==null?void 0:i[0])??""}})}),x=f(()=>Object.entries(l.value.variables??{}).reduce((e,[a,r])=>{var i;return e[a]=r.value??r.default??((i=r==null?void 0:r.enum)==null?void 0:i[0])??"",e},{}));return(e,a)=>(o(),k("div",I,[l.value?(o(),k(j,{key:0},[u(y,{data:l.value,onUpdate:_,options:m,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(o(),h(y,{key:0,data:x.value,onUpdate:c,options:n.value,title:"Variables"},null,8,["data","options"])):B("",!0)],64)):B("",!0)]))}}),P={class:"flex-1"},W=U({__name:"Servers",setup(C){const{activeCollection:t,servers:p,serverMutators:v}=S(),{push:m}=$(),d=()=>{if(!t.value)return;const l=E({url:"http://localhost"});v.add(l,t.value.uid),m(`/servers/${l.uid}`)};return(l,_)=>(o(),h(O,null,{default:s(()=>[u(N,null,{default:s(()=>[u(b(V),{title:"Servers"},{content:s(()=>[A("div",P,[u(g,null,{default:s(()=>{var c;return[(o(!0),k(j,null,H((c=b(t))==null?void 0:c.spec.serverUids,n=>(o(),h(F,{key:n,class:"text-xs",variable:{name:b(p)[n].url,uid:n}},null,8,["variable"]))),128))]}),_:1})])]),button:s(()=>[u(w,{click:d},{title:s(()=>[M("Add Server")]),_:1})]),_:1}),u(L,{class:"flex-1"},{default:s(()=>[u(K)]),_:1})]),_:1})]),_:1}))}});export{W as default};
