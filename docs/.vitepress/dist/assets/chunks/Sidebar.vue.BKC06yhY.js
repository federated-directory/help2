import{s as G,d as M,h as P,P as E,p as h,v as ae,x as le,L as se,X as ne,o as f,b as D,w as I,E as C,k as m,e as O,r as R,K as J,j as S,c as $,n as A,t as T,q as H,aB as Q,aH as oe,Z as re,F as ue,B as ie,a as j,a0 as ce,aC as de,N as pe}from"./framework.Q1EpFJIG.js";import{p as ve,b as K,d as me,c as y,A as F,j as g,af as _,k as fe,m as U,ag as be,N as q,ah as Z,q as L,w as xe,x as ge,y as he,ai as ye,aj as we,ak as ke,al as Ie,F as Se,C as $e,J as Me,L as _e,H as Pe,I as Re,V as Ce,W as De,t as z,X as Y,G as B}from"./ScalarWrapper.tDm4ZA20.js";import{s as W,n as Ee,r as Te}from"./index.nT-X51LW.js";function Be({container:a,accept:l,walk:o,enabled:u}){G(()=>{let i=a.value;if(!i||u!==void 0&&!u.value)return;let c=ve(a);if(!c)return;let e=Object.assign(n=>l(n),{acceptNode:l}),d=c.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e,!1);for(;d.nextNode();)o(d.currentNode)})}var Oe=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Oe||{}),Ne=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Ne||{});function Ae(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let ee=Symbol("MenuContext");function V(a){let l=se(ee,null);if(l===null){let o=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,V),o}return l}let Le=M({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:l,attrs:o}){let u=h(1),i=h(null),c=h(null),e=h([]),d=h(""),n=h(null),x=h(1);function w(t=r=>r){let r=n.value!==null?e.value[n.value]:null,s=we(t(e.value.slice()),k=>y(k.dataRef.domRef)),p=r?s.indexOf(r):null;return p===-1&&(p=null),{items:s,activeItemIndex:p}}let v={menuState:u,buttonRef:i,itemsRef:c,items:e,searchQuery:d,activeItemIndex:n,activationTrigger:x,closeMenu:()=>{u.value=1,n.value=null},openMenu:()=>u.value=0,goToItem(t,r,s){let p=w(),k=ye(t===_.Specific?{focus:_.Specific,id:r}:{focus:t},{resolveItems:()=>p.items,resolveActiveIndex:()=>p.activeItemIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.disabled});d.value="",n.value=k,x.value=s??1,e.value=p.items},search(t){let r=d.value!==""?0:1;d.value+=t.toLowerCase();let s=(n.value!==null?e.value.slice(n.value+r).concat(e.value.slice(0,n.value+r)):e.value).find(k=>k.dataRef.textValue.startsWith(d.value)&&!k.dataRef.disabled),p=s?e.value.indexOf(s):-1;p===-1||p===n.value||(n.value=p,x.value=1)},clearSearch(){d.value=""},registerItem(t,r){let s=w(p=>[...p,{id:t,dataRef:r}]);e.value=s.items,n.value=s.activeItemIndex,x.value=1},unregisterItem(t){let r=w(s=>{let p=s.findIndex(k=>k.id===t);return p!==-1&&s.splice(p,1),s});e.value=r.items,n.value=r.activeItemIndex,x.value=1}};return xe([i,c],(t,r)=>{var s;v.closeMenu(),ge(r,he.Loose)||(t.preventDefault(),(s=y(i))==null||s.focus())},P(()=>u.value===0)),ne(ee,v),Se(P(()=>$e(u.value,{0:L.Open,1:L.Closed}))),()=>{let t={open:u.value===0,close:v.closeMenu};return F({ourProps:{},theirProps:a,slot:t,slots:l,attrs:o,name:"Menu"})}}}),Fe=M({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:l,slots:o,expose:u}){var i;let c=(i=a.id)!=null?i:`headlessui-menu-button-${K()}`,e=V("MenuButton");u({el:e.buttonRef,$el:e.buttonRef});function d(v){switch(v.key){case g.Space:case g.Enter:case g.ArrowDown:v.preventDefault(),v.stopPropagation(),e.openMenu(),E(()=>{var t;(t=y(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(_.First)});break;case g.ArrowUp:v.preventDefault(),v.stopPropagation(),e.openMenu(),E(()=>{var t;(t=y(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(_.Last)});break}}function n(v){switch(v.key){case g.Space:v.preventDefault();break}}function x(v){a.disabled||(e.menuState.value===0?(e.closeMenu(),E(()=>{var t;return(t=y(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(v.preventDefault(),e.openMenu(),Ae(()=>{var t;return(t=y(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let w=me(P(()=>({as:a.as,type:l.type})),e.buttonRef);return()=>{var v;let t={open:e.menuState.value===0},{...r}=a,s={ref:e.buttonRef,id:c,type:w.value,"aria-haspopup":"menu","aria-controls":(v=y(e.itemsRef))==null?void 0:v.id,"aria-expanded":e.menuState.value===0,onKeydown:d,onKeyup:n,onClick:x};return F({ourProps:s,theirProps:r,slot:t,attrs:l,slots:o,name:"MenuButton"})}}}),Ve=M({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:l,slots:o,expose:u}){var i;let c=(i=a.id)!=null?i:`headlessui-menu-items-${K()}`,e=V("MenuItems"),d=h(null);u({el:e.itemsRef,$el:e.itemsRef}),Be({container:P(()=>y(e.itemsRef)),enabled:P(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function n(t){var r;switch(d.value&&clearTimeout(d.value),t.key){case g.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case g.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let s=e.items.value[e.activeItemIndex.value];(r=y(s.dataRef.domRef))==null||r.click()}e.closeMenu(),Z(y(e.buttonRef));break;case g.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Next);case g.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Previous);case g.Home:case g.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.First);case g.End:case g.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Last);case g.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),E(()=>{var s;return(s=y(e.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case g.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),E(()=>be(y(e.buttonRef),t.shiftKey?q.Previous:q.Next));break;default:t.key.length===1&&(e.search(t.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}function x(t){switch(t.key){case g.Space:t.preventDefault();break}}let w=fe(),v=P(()=>w!==null?(w.value&L.Open)===L.Open:e.menuState.value===0);return()=>{var t,r;let s={open:e.menuState.value===0},{...p}=a,k={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(r=y(e.buttonRef))==null?void 0:r.id,id:c,onKeydown:n,onKeyup:x,role:"menu",tabIndex:0,ref:e.itemsRef};return F({ourProps:k,theirProps:p,slot:s,attrs:l,slots:o,features:U.RenderStrategy|U.Static,visible:v.value,name:"MenuItems"})}}}),ze=M({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:l,attrs:o,expose:u}){var i;let c=(i=a.id)!=null?i:`headlessui-menu-item-${K()}`,e=V("MenuItem"),d=h(null);u({el:d,$el:d});let n=P(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===c:!1),x=ke(d),w=P(()=>({disabled:a.disabled,get textValue(){return x()},domRef:d}));ae(()=>e.registerItem(c,w)),le(()=>e.unregisterItem(c)),G(()=>{e.menuState.value===0&&n.value&&e.activationTrigger.value!==0&&E(()=>{var b,N;return(N=(b=y(d))==null?void 0:b.scrollIntoView)==null?void 0:N.call(b,{block:"nearest"})})});function v(b){if(a.disabled)return b.preventDefault();e.closeMenu(),Z(y(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(_.Nothing);e.goToItem(_.Specific,c)}let r=Ie();function s(b){r.update(b)}function p(b){r.wasMoved(b)&&(a.disabled||n.value||e.goToItem(_.Specific,c,0))}function k(b){r.wasMoved(b)&&(a.disabled||n.value&&e.goToItem(_.Nothing))}return()=>{let{disabled:b,...N}=a,te={active:n.value,disabled:b,close:e.closeMenu};return F({ourProps:{id:c,ref:d,role:"menuitem",tabIndex:b===!0?void 0:-1,"aria-disabled":b===!0?!0:void 0,onClick:v,onFocus:t,onPointerenter:s,onMouseenter:s,onPointermove:p,onMousemove:p,onPointerleave:k,onMouseleave:k},theirProps:{...o,...N},slot:te,attrs:o,slots:l,name:"MenuItem"})}}});const je=S("div",{class:"absolute inset-0 -z-1 rounded bg-b-1 shadow-lg brightness-lifted"},null,-1),Ke=M({inheritAttrs:!1,__name:"ScalarDropdown",props:{placement:{},resize:{type:Boolean},isOpen:{type:Boolean},teleport:{type:[Boolean,String]},static:{type:Boolean,default:!1}},setup(a){return(l,o)=>(f(),D(m(Le),null,{default:I(({open:u})=>[C(m(Me),{isOpen:l.static?!0:u??l.isOpen,placement:l.placement??"bottom-start",resize:l.resize,teleport:l.teleport},{floating:I(({width:i})=>[C(m(Ve),J({class:"relative flex w-56 flex-col p-0.75"},l.$attrs,{static:l.static,style:{width:i}}),{default:I(()=>[R(l.$slots,"items"),je]),_:2},1040,["static","style"])]),default:I(()=>[l.static?O("",!0):(f(),D(m(Fe),{key:0,as:"template"},{default:I(()=>[R(l.$slots,"default")]),_:3}))]),_:2},1032,["isOpen","placement","resize","teleport"])]),_:3}))}}),We={},He={class:"-mx-0.75 my-0.75 h-px bg-border"};function Ue(a,l){return f(),$("div",He)}const qe=_e(We,[["render",Ue]]),X=M({__name:"ScalarDropdownItem",props:{disabled:{type:Boolean}},emits:["click"],setup(a){const l=Re({base:["h-8 min-w-0 items-center gap-1.5 rounded px-2.5 py-1.5 text-left","truncate text-sm text-c-1","cursor-pointer hover:bg-b-2 hover:text-c-1"],variants:{disabled:{true:"pointer-events-none text-c-3"},active:{true:"bg-b-2 text-c-1"}}});return(o,u)=>(f(),D(m(ze),{disabled:o.disabled},{default:I(({active:i})=>[S("button",{class:A(["item",m(Pe)("scalar-dropdown-item",m(l)({active:i,disabled:o.disabled}))]),type:"button",onClick:u[0]||(u[0]=c=>o.$emit("click",c))},[R(o.$slots,"default")],2)]),_:3},8,["disabled"]))}});function Xe(){return new Map([["↵","enter"],["N","n"]])}const Ge=M({__name:"ScalarHotkey",props:{hotkey:{}},emits:["hotkeyPressed"],setup(a,{emit:l}){const o=a,u=l,i=P(()=>z()?"⌘":"⌃"),c=P(()=>Xe().get(o.hotkey)),e=P(()=>`${i.value}${o.hotkey}`),d=Ce({passive:!1,onEventFired(n){!z()&&n.ctrlKey&&n.key===c.value&&(n.preventDefault(),n.stopPropagation())}});return De(d[`${z()?"meta":"control"}_${o.hotkey}`],()=>{u("hotkeyPressed",c.value||"")}),(n,x)=>(f(),$("div",J(n.$attrs,{class:"bg-c-btn border-b-3 inline-block overflow-hidden rounded border-1/2 text-xxs rounded-b px-1 font-medium uppercase"}),T(e.value),17))}}),Je={class:"w-full"},Qe={class:"flex items-center justify-center h-4 w-4"},Ze=S("span",null,"Add value",-1),xt=M({__name:"DataTableInputSelect",props:{modelValue:{},value:{},canAddCustomValue:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(a,{emit:l}){const o=a,u=l,i=P(()=>o.value??[]),c=h(o.modelValue.toString()),e=h(!1),d=h(""),n=h(null);H(d,r=>{u("update:modelValue",r)});const x=r=>{c.value=r,u("update:modelValue",r),e.value=!1},w=()=>{d.value.trim()&&(x(d.value),d.value="")},v=()=>{d.value.trim()||(c.value="",e.value=!1)},t=r=>c.value===r;return H(e,r=>{r&&E(()=>{var s;(s=n.value)==null||s.focus()})}),(r,s)=>(f(),$("div",Je,[e.value?Q((f(),$("input",{key:0,ref_key:"inputRef",ref:n,"onUpdate:modelValue":s[0]||(s[0]=p=>d.value=p),class:"border-none text-c-1 min-w-0 w-full px-2 py-1.5 outline-none",placeholder:"Value",type:"text",onBlur:v,onKeyup:re(w,["enter"])},null,544)),[[oe,d.value]]):(f(),D(m(Ke),{key:1,resize:"",value:c.value},{items:I(()=>[(f(!0),$(ue,null,ie(i.value,p=>(f(),D(m(X),{key:p,class:"flex gap-1.5 group/item items-center whitespace-nowrap text-ellipsis overflow-hidden",value:p,onClick:k=>x(p)},{default:I(()=>[S("div",{class:A(["flex items-center justify-center rounded-full p-[3px] w-4 h-4 group-hover/item:shadow-border",t(p)?"bg-blue text-b-1":"text-transparent"])},[C(m(B),{class:"size-2.5",icon:"Checkmark",thickness:"3.5"})],2),j(" "+T(p),1)]),_:2},1032,["value","onClick"]))),128)),C(m(qe)),r.canAddCustomValue?(f(),D(m(X),{key:0,class:"flex items-center gap-1.5",onClick:s[1]||(s[1]=p=>e.value=!0)},{default:I(()=>[S("div",Qe,[C(m(B),{class:"h-2.5",icon:"Add"})]),Ze]),_:1})):O("",!0)]),default:I(()=>[C(m(Y),{class:"gap-1.5 font-normal h-full justify-start px-2 py-1.5",fullWidth:"",variant:"ghost"},{default:I(()=>[S("span",null,T(c.value||"Select a value"),1),c.value?O("",!0):(f(),D(m(B),{key:0,icon:"ChevronDown",size:"xs"}))]),_:1})]),_:1},8,["value"]))]))}}),Ye={class:"fixed relative bottom-[42px] z-10 flex px-2.5 pb-2 pt-0"},gt=M({__name:"SidebarButton",props:{click:{type:Function}},setup(a){const l=a,o=()=>{l.click()};return(u,i)=>(f(),$("div",Ye,[C(m(Y),{class:"bg-b-1 text-c-1 hover:bg-b-2 group relative w-full border-1/2 p-1.5 h-auto",icon:"Plus",variant:"outlined",onClick:o},{default:I(()=>[R(u.$slots,"title"),C(Ge,{class:"absolute right-2 group-hover:opacity-80 text-c-2 add-item-hotkey",hotkey:"K",onHotkeyPressed:o})]),_:3})]))}}),et={},tt={class:"flex min-h-0 flex-1 xl:overflow-hidden leading-3 z-0"};function at(a,l){return f(),$("div",tt,[R(a.$slots,"default")])}const ht=W(et,[["render",at]]),lt={},st={class:"divide divide-y xl:divide-y-0 xl:divide-x-1/2 flex xl:flex-row flex-col custom-scroll rounded"};function nt(a,l){return f(),$("div",st,[R(a.$slots,"default")])}const yt=W(lt,[["render",nt]]),ot=["aria-labelledby"],rt=["id"],wt=M({__name:"ViewLayoutSection",setup(a){const l=Ee();return(o,u)=>(f(),$("section",{"aria-labelledby":m(l),class:"flex xl:min-w-0 xl:flex-1 flex-col xl:custom-scroll bg-b-1"},[S("div",{id:m(l),class:"xl:min-h-header py-2.5 flex items-center border-b-1/2 px-4 xl:px-6 text-sm font-medium sticky top-0 bg-b-1 z-20 rounded-t xl:rounded-none"},[R(o.$slots,"title")],8,rt),R(o.$slots,"default")],8,ot))}}),ut=["error"],it=M({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup(a,{emit:l}){const o=l;return(u,i)=>(f(),$("form",{class:"text-base",onSubmit:i[1]||(i[1]=ce(c=>o("submit"),["prevent"]))},[R(u.$slots,"default",{},void 0,!0),S("div",null,[S("button",{class:"w-full text-left focus:bg-b-2 hover:bg-b-2 rounded gap-1.5 px-2.5 py-1.5 focus:outline-none flex items-center cursor-pointer",type:"button",onClick:i[0]||(i[0]=c=>o("cancel"))},[C(m(B),{class:"inline-flex",icon:"Close",size:"sm",thickness:"1.75"}),j(" Cancel ")]),S("button",{class:"w-full text-left focus:bg-b-2 hover:bg-b-2 rounded gap-1.5 px-2.5 py-1.5 focus:outline-none flex items-center cursor-pointer delete-warning-button",error:u.danger,type:"submit"},[C(m(B),{class:"inline-flex",icon:"Trash",size:"sm",thickness:"1.5"}),j(" "+T(u.label??"Submit"),1)],8,ut)])],32))}}),ct=W(it,[["__scopeId","data-v-e58070fb"]]),dt={key:0,class:"text-c-3 font-medium text-xs mb-2"},kt=M({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(a,{emit:l}){const o=l;async function u(){o("delete")}return(i,c)=>(f(),D(ct,{danger:"",label:`Delete ${i.variableName}`,onCancel:c[0]||(c[0]=e=>o("close")),onSubmit:u},{default:I(()=>[i.warningMessage?(f(),$("p",dt,T(i.warningMessage),1)):O("",!0)]),_:1},8,["label"]))}}),pt={key:0,class:"xl:min-h-header py-2.5 flex items-center border-b-1/2 px-4 text-sm"},vt={class:"font-medium m-0 text-sm whitespace-nowrap"},It=M({__name:"Sidebar",props:{title:{},showSideBar:{type:Boolean,default:!0}},setup(a){const l=a,{isReadOnly:o,sidebarWidth:u,setSidebarWidth:i}=Te(),c=h(!1),e=h(null),d=n=>{n.preventDefault();const x=n.clientX,w=parseInt(getComputedStyle(e.value).width||u.value,10),v=r=>{c.value=!0,document.body.classList.add("dragging");let s=w+r.clientX-x;s>420&&(s=420+(s-420)*.2),s<240&&(s=240),i(`${s}px`)},t=()=>{c.value=!1,document.body.classList.remove("dragging"),document.documentElement.removeEventListener("mousemove",v,!1),document.documentElement.removeEventListener("mouseup",t,!1),parseInt(u.value,10)>420?i("360px"):parseInt(u.value,10)<240&&i("240px")};document.documentElement.addEventListener("mousemove",v,!1),document.documentElement.addEventListener("mouseup",t,!1)};return(n,x)=>Q((f(),$("aside",{ref_key:"sidebarRef",ref:e,class:A(["sidebar overflow-hidden relative flex flex-col border-r-1/2 bg-b-1",{dragging:c.value}]),style:pe({width:m(u)})},[R(n.$slots,"header"),!m(o)&&n.title?(f(),$("div",pt,[S("h2",vt,T(n.title),1)])):O("",!0),S("div",{class:A(["custom-scroll sidebar-height",{"sidebar-mask":!m(o)}])},[R(n.$slots,"content")],2),R(n.$slots,"button"),S("div",{class:"resizer",onMousedown:d},null,32)],6)),[[de,l.showSideBar]])}});export{X as C,It as I,Ke as O,Ge as P,gt as a,ht as b,xt as c,qe as i,kt as k,wt as u,yt as x};
