import{d as b,o as n,c,F as k,B as y,j as g,b as m,k as u,e as C,n as B,v as S,w as t,E as s,a as I,aD as K,t as M,Z as R,p,P as j}from"./framework.Q1EpFJIG.js";import{_ as z}from"./CodeInput.vue.4pCe5FXj.js";import{b as A,I as F,a as G,x as P,u as T}from"./Sidebar.vue.BKC06yhY.js";import{d as J,a as L,p as O}from"./SubpageHeader.vue.DoThBf5B.js";import{u as Q,r as U,n as X}from"./index.nT-X51LW.js";import{G as Z}from"./ScalarWrapper.tDm4ZA20.js";const q={class:"flex flex-row gap-1.5 space-x-1"},H=["onClick"],W=b({__name:"EnvironmentColors",props:{activeColor:{}},emits:["select"],setup(x){const v=[{color:"grey",bgClass:"bg-grey"},{color:"red",bgClass:"bg-red"},{color:"yellow",bgClass:"bg-yellow"},{color:"green",bgClass:"bg-green"},{color:"orange",bgClass:"bg-orange"},{color:"blue",bgClass:"bg-blue"},{color:"text-c-2",bgClass:"bg-c-2"},{color:"purple",bgClass:"bg-purple"},{color:"pink",bgClass:"bg-pink"}];return(a,i)=>(n(),c("div",q,[(n(),c(k,null,y(v,e=>g("div",{key:e.color,class:B(["flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",e.bgClass]),onClick:f=>a.$emit("select",e.color)},[a.activeColor===e.color?(n(),m(u(Z),{key:0,icon:"Checkmark",size:"xs"})):C("",!0)],10,H)),64))]))}}),Y={class:"flex-1"},ee=["value"],le={class:"colors ml-auto"},re=b({__name:"Environment",setup(x){const v=Q(),{environments:a,environmentMutators:i}=U(),e=p(null),f=p(null),d=p(!1);function w(){const l={name:"New Environment",uid:X(),color:"grey",raw:JSON.stringify({exampleKey:"exampleValue"},null,2),parsed:[],isDefault:!1};i.add(l),e.value=l.uid,v.push(e.value)}function _(l){e.value&&i.edit(e.value,"raw",l)}const D=l=>{i.delete(l),e.value===l&&(e.value=null)},V=l=>{e.value&&(a[e.value].color=l)},E=()=>{v.currentRoute.value.params.environment==="default"&&(e.value=a.default.uid)},h=()=>{e.value&&!a[e.value].isDefault&&(d.value=!0,j(()=>{var l;(l=f.value)==null||l.focus()}))},N=l=>{const r=l.target.value;e.value&&!a[e.value].isDefault&&i.edit(e.value,"name",r)};return S(E),(l,r)=>(n(),m(O,null,{default:t(()=>[s(A,null,{default:t(()=>[s(F,{title:"Environment"},{content:t(()=>[g("div",Y,[s(J,null,{default:t(()=>[(n(!0),c(k,null,y(u(a),o=>(n(),m(L,{key:o.uid,class:"text-xs",variable:{name:o.name,uid:o.uid,color:o.color,isDefault:o.isDefault},warningMessage:"Are you sure you want to delete this environment?",onClick:$=>e.value=o.uid,onDelete:$=>D(o.uid)},null,8,["variable","onClick","onDelete"]))),128))]),_:1})])]),button:t(()=>[s(G,{click:w},{title:t(()=>[I("Add Environment Variable")]),_:1})]),_:1}),s(P,{class:"flex-1"},{default:t(()=>[s(T,null,K({default:t(()=>[e.value?(n(),m(z,{key:0,class:"px-2 py-2.5",lineNumbers:"",modelValue:u(a)[e.value].raw,"onUpdate:modelValue":_},null,8,["modelValue"])):C("",!0)]),_:2},[e.value?{name:"title",fn:t(()=>[!d.value||u(a)[e.value].isDefault?(n(),c("span",{key:0,onDblclick:h},M(u(a)[e.value].name),33)):(n(),c("input",{key:1,ref_key:"nameInputRef",ref:f,class:"ring-1 ring-offset-4 ring-b-outline rounded",spellcheck:"false",type:"text",value:u(a)[e.value].name,onBlur:r[0]||(r[0]=o=>d.value=!1),onInput:N,onKeyup:r[1]||(r[1]=R(o=>d.value=!1,["enter"]))},null,40,ee)),g("div",le,[s(W,{activeColor:u(a)[e.value].color,onSelect:V},null,8,["activeColor"])])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1}))}});export{re as default};
