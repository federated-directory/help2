import { xScalarCookieSchema } from "../schemas/extensions/general/x-scalar-cookies.js";
import { coerceValue } from "../schemas/typebox-coerce.js";
const upsertCookie = (collection, { payload, index }) => {
  if (!collection) {
    return;
  }
  if (!collection["x-scalar-cookies"]) {
    collection["x-scalar-cookies"] = [];
  }
  if (index !== void 0) {
    if (index < 0 || index >= collection["x-scalar-cookies"].length) {
      return;
    }
    const parsed2 = coerceValue(xScalarCookieSchema, {
      ...collection["x-scalar-cookies"][index],
      ...payload
    });
    collection["x-scalar-cookies"][index] = parsed2;
    return parsed2;
  }
  const parsed = coerceValue(xScalarCookieSchema, payload);
  collection["x-scalar-cookies"].push(parsed);
  return parsed;
};
const deleteCookie = (collection, { index }) => {
  if (!collection || !collection["x-scalar-cookies"]) {
    return false;
  }
  if (index < 0 || index >= collection["x-scalar-cookies"].length) {
    return false;
  }
  collection["x-scalar-cookies"].splice(index, 1);
  return true;
};
const cookieMutatorsFactory = ({ collection }) => {
  return {
    upsertCookie: (payload) => upsertCookie(collection, payload),
    deleteCookie: (payload) => deleteCookie(collection, payload)
  };
};
export {
  cookieMutatorsFactory,
  deleteCookie,
  upsertCookie
};
//# sourceMappingURL=cookie.js.map
