async function generateUniqueValue({
  defaultValue,
  /** Check function to verify the uniqueness of the value */
  validation,
  /** Transformation function to transform the default value (such as into a slug) */
  transformation,
  /** The maximum number of attempts to create a unique value by incrementing. */
  maxRetries = 5
}) {
  const transformed = transformation?.(defaultValue) ?? defaultValue;
  if (await validation(transformed)) {
    return transformed;
  }
  return incrementValue({
    value: [transformed, 1],
    validation,
    maxRetries,
    transformation
  });
}
async function incrementValue({
  value,
  validation,
  maxRetries,
  attempts = 0,
  transformation
}) {
  if (attempts >= maxRetries) {
    return;
  }
  const incremented = value.join(" ");
  const transformed = transformation?.(incremented) ?? incremented;
  if (await validation(transformed)) {
    return transformed;
  }
  return incrementValue({
    value: [value[0], value[1] + 1],
    validation,
    maxRetries,
    transformation,
    attempts: attempts + 1
  });
}
export {
  generateUniqueValue
};
//# sourceMappingURL=generate-unique-value.js.map
