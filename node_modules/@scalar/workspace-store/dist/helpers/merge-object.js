import { getRaw } from "@scalar/json-magic/magic-proxy";
const mergeObjects = (a, b, replaceArrays = false, cache = /* @__PURE__ */ new Set()) => {
  for (const key in b) {
    if (!(key in a)) {
      a[key] = b[key];
    } else {
      const aValue = a[key];
      const bValue = b[key];
      const shouldReplaceArrays = replaceArrays && (Array.isArray(aValue) || Array.isArray(bValue));
      if (typeof aValue === "object" && aValue !== null && typeof bValue === "object" && bValue !== null && !shouldReplaceArrays) {
        const rawA = getRaw(aValue);
        const rawB = getRaw(bValue);
        if (cache.has(rawA) || cache.has(rawB)) {
          continue;
        }
        cache.add(rawA);
        cache.add(rawB);
        mergeObjects(aValue, bValue, replaceArrays, cache);
      } else {
        try {
          a[key] = bValue;
        } catch (error) {
          console.warn(`Issue setting ${key} on object`);
          console.warn(error);
        }
      }
    }
  }
  return a;
};
export {
  mergeObjects
};
//# sourceMappingURL=merge-object.js.map
