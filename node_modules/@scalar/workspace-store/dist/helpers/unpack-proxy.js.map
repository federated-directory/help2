{
  "version": 3,
  "sources": ["../../src/helpers/unpack-proxy.ts"],
  "sourcesContent": ["import { getRaw } from '@scalar/json-magic/magic-proxy'\nimport { toRaw } from 'vue'\n\nimport { unpackDetectChangesProxy } from '@/helpers/detect-changes-proxy'\nimport { unpackOverridesProxy } from '@/helpers/overrides-proxy'\n\n/**\n * Unpacks special vue reactivity & override & detect-changes & magic proxy from an input object or array,\n * returning the \"raw\" plain object or array.\n *\n * This function recursively traverses the input object or array, removing any proxies\n * (e.g. Vue reactivity proxies, magic proxies, override proxies, detect-changes proxies)\n * to obtain and return the underlying \"raw\" plain object or array.\n *\n * The recursion is controlled by the `depth` parameter. If `depth` is `null`, unlimited depth is allowed.\n * If a proxied object is detected and unwrapped at non-root level, a warning is logged.\n *\n * @param input - The object or array (possibly deeply nested or proxied) to recursively unwrap.\n * @param depth - Optional, limits recursion depth. `null` means unlimited depth (default is 1).\n * @returns - A plain object or array with all proxies removed up to the specified depth.\n */\nexport const unpackProxyObject = <T>(input: T, { depth = 0 }: { depth?: number | null } = {}): T => {\n  // Internal DFS helper to recursively strip all known proxies (Vue, overrides, detect-changes, magic proxies)\n  const dfs = (value: any, currentDepth: number = 0): any => {\n    // Base case: non-objects (primitives, null) are returned as-is\n    if (typeof value !== 'object' || value === null) {\n      return value\n    }\n\n    // Compose all the proxy unwraps in order\n    const raw = unpackDetectChangesProxy(toRaw(getRaw(unpackOverridesProxy(value))))\n\n    // If we have reached the maximum depth, return the value (potentially still partially proxied)\n    if (depth !== null && currentDepth >= depth) {\n      return raw\n    }\n\n    // Show a warning if a nested value was a proxy (usually undesired, can cause subtle bugs)\n    if (currentDepth !== 0 && raw !== value) {\n      console.warn(\n        '%c\u26A0 Warning:%c You tried to assign a proxied object (depth: %d).\\n' +\n          '%c\uD83D\uDCA1 Tip:%c Pass a plain object instead \u2014 wrapping a proxy inside another proxy may cause weird bugs.\\n' +\n          '%c\uD83D\uDD0D Debug Info:%c The problematic value is shown below:',\n        // styles\n        'background: #fdd835; color: #000; font-weight: bold; padding: 2px 4px; border-radius: 3px;',\n        'color: inherit;',\n        currentDepth,\n        'color: #00bfa5; font-weight: bold;',\n        'color: inherit;',\n        'color: #03a9f4; font-weight: bold;',\n        'color: inherit;',\n        value,\n        input,\n      )\n\n      // Collapsed trace group for cleaner output\n      console.groupCollapsed('%c\uD83D\uDCDC Proxy assignment trace', 'color: #9c27b0; font-weight: bold;')\n      console.trace({ value, raw })\n      console.groupEnd()\n    }\n\n    // Recursively process all properties/entries to make sure we are not assigning proxies directly,\n    // but are always assigning plain objects at any level.\n    Object.entries(raw).forEach(([key, value]) => {\n      const propertyResult = dfs(value, currentDepth + 1)\n      const result = Reflect.set(raw, key, propertyResult)\n\n      if (!result) {\n        console.warn(\n          '%c\uD83D\uDEAB Readonly Property Error:%c Failed to set property \"%s\" on object.\\n' +\n            '%c\uD83D\uDCA1 Tip:%c This property is readonly or non-configurable. You cannot unpack a readonly property \u2014 the value was not updated.\\n' +\n            '%c\uD83D\uDD0D Debug Info:%c Property: %s | Value: %o | Object: %o',\n          // styles\n          'background: #f44336; color: #fff; font-weight: bold; padding: 2px 4px; border-radius: 3px;',\n          'color: inherit;',\n          key,\n          'color: #00bfa5; font-weight: bold;',\n          'color: inherit;',\n          'color: #03a9f4; font-weight: bold;',\n          'color: inherit;',\n          key,\n          propertyResult,\n          raw,\n        )\n      }\n    })\n\n    return raw\n  }\n\n  return dfs(input)\n}\n"],
  "mappings": "AAAA,SAAS,cAAc;AACvB,SAAS,aAAa;AAEtB,SAAS,gCAAgC;AACzC,SAAS,4BAA4B;AAiB9B,MAAM,oBAAoB,CAAI,OAAU,EAAE,QAAQ,EAAE,IAA+B,CAAC,MAAS;AAElG,QAAM,MAAM,CAAC,OAAY,eAAuB,MAAW;AAEzD,QAAI,OAAO,UAAU,YAAY,UAAU,MAAM;AAC/C,aAAO;AAAA,IACT;AAGA,UAAM,MAAM,yBAAyB,MAAM,OAAO,qBAAqB,KAAK,CAAC,CAAC,CAAC;AAG/E,QAAI,UAAU,QAAQ,gBAAgB,OAAO;AAC3C,aAAO;AAAA,IACT;AAGA,QAAI,iBAAiB,KAAK,QAAQ,OAAO;AACvC,cAAQ;AAAA,QACN;AAAA;AAAA,QAIA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAGA,cAAQ,eAAe,sCAA+B,oCAAoC;AAC1F,cAAQ,MAAM,EAAE,OAAO,IAAI,CAAC;AAC5B,cAAQ,SAAS;AAAA,IACnB;AAIA,WAAO,QAAQ,GAAG,EAAE,QAAQ,CAAC,CAAC,KAAKA,MAAK,MAAM;AAC5C,YAAM,iBAAiB,IAAIA,QAAO,eAAe,CAAC;AAClD,YAAM,SAAS,QAAQ,IAAI,KAAK,KAAK,cAAc;AAEnD,UAAI,CAAC,QAAQ;AACX,gBAAQ;AAAA,UACN;AAAA;AAAA,UAIA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AAED,WAAO;AAAA,EACT;AAEA,SAAO,IAAI,KAAK;AAClB;",
  "names": ["value"]
}
