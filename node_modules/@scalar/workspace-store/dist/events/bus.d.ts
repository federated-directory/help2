import type { ApiReferenceEvents } from './definitions/index.js';
type Unsubscribe = () => void;
/**
 * Helper type for event listeners that makes the payload optional
 * if the event allows undefined, otherwise requires it.
 */
type EventListener<E extends keyof ApiReferenceEvents> = undefined extends ApiReferenceEvents[E] ? (payload?: ApiReferenceEvents[E]) => void : (payload: ApiReferenceEvents[E]) => void;
/**
 * Helper type for emit parameters that uses rest parameters
 * for a cleaner API surface.
 *
 * @example
 * bus.emit('scalar-update-sidebar', { value: true }, { debounceKey: 'test' })
 */
type EmitParameters<E extends keyof ApiReferenceEvents> = undefined extends ApiReferenceEvents[E] ? [event: E, payload?: ApiReferenceEvents[E], options?: {
    skipUnpackProxy?: boolean;
    debounceKey?: string;
}] : [event: E, payload: ApiReferenceEvents[E], options?: {
    skipUnpackProxy?: boolean;
    debounceKey?: string;
}];
/**
 * Type-safe event bus for workspace events
 *
 * - Full type safety for event names and payloads
 * - Debug mode for development
 */
export type WorkspaceEventBus = {
    /**
     * Subscribe to an event
     *
     * @param event - The event name to listen for
     * @param listener - Callback function that receives the event detail
     * @returns Unsubscribe function to remove the listener
     *
     * @example
     * const unsubscribe = bus.on('scalar-update-sidebar', (detail) => {
     *   console.log('Sidebar state:', detail.value)
     * })
     *
     * // Later, clean up
     * unsubscribe()
     */
    on<E extends keyof ApiReferenceEvents>(event: E, listener: EventListener<E>): Unsubscribe;
    /**
     * Remove a specific event listener
     *
     * @param event - The event name
     * @param listener - The listener function to remove
     *
     * @example
     * const handler = (detail) => console.log(detail)
     * bus.on('scalar-update-sidebar', handler)
     * bus.off('scalar-update-sidebar', handler)
     */
    off<E extends keyof ApiReferenceEvents>(event: E, listener: EventListener<E>): void;
    /**
     * Emit an event with its payload
     *
     * @param event - The event name to emit
     * @param payload - The event detail payload (optional if event allows undefined)
     * @param options.skipUnpackProxy - Whether to skip unpacking the proxy object,
     * useful if we are sure there is no proxy OR when passing js events like keyboard events.
     * @param options.debounceKey - If present we will debounce the event by the key + event name.
     *
     * @example
     * bus.emit('scalar-update-sidebar', { value: true })
     */
    emit<E extends keyof ApiReferenceEvents>(...args: EmitParameters<E>): void;
};
/**
 * Options for creating an event bus
 */
type EventBusOptions = {
    /**
     * Enable debug mode to log all events and listener operations
     * Useful for development and troubleshooting
     */
    debug?: boolean;
};
/**
 * Creates a type-safe event bus for workspace events
 *
 * This implementation uses a Map for O(1) lookups and maintains
 * a separate Set for each event type to efficiently manage listeners.
 *
 * Create this once per application instance.
 *
 * @param options - Configuration options
 * @returns A fully type-safe event bus instance
 *
 * @example
 * const bus = createWorkspaceEventBus()
 *
 * // Subscribe to events
 * const unsubscribe = bus.on('scalar-update-sidebar', (detail) => {
 *   console.log('Sidebar:', detail.value)
 * })
 *
 * // Emit events
 * bus.emit('scalar-update-sidebar', { value: true })
 *
 * // Clean up
 * unsubscribe()
 */
export declare const createWorkspaceEventBus: (options?: EventBusOptions) => WorkspaceEventBus;
export {};
//# sourceMappingURL=bus.d.ts.map