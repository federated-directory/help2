{
  "version": 3,
  "sources": ["../../../src/navigation/helpers/get-openapi-object.ts"],
  "sourcesContent": ["import type { WorkspaceStore } from '@/client'\nimport { getResolvedRef } from '@/helpers/get-resolved-ref'\nimport type { WorkspaceDocument } from '@/schemas'\nimport type { TraversedDocument, TraversedEntry, TraversedOperation, TraversedTag } from '@/schemas/navigation'\nimport type { OperationObject, TagObject } from '@/schemas/v3.1/strict/openapi-document'\n\nimport { getParentEntry } from './get-parent-entry'\n\ntype TraversedOrderable = TraversedDocument | TraversedTag | TraversedOperation\n\ntype GetOpenapiObject<Entry extends TraversedOrderable> = Entry extends TraversedDocument\n  ? WorkspaceDocument\n  : Entry extends TraversedTag\n    ? TagObject\n    : Entry extends TraversedOperation\n      ? OperationObject\n      : never\n\n/** Type guard which checks if the entry has an x-scalar-order property */\nexport const canHaveOrder = (entry: TraversedEntry): entry is TraversedOrderable =>\n  entry.type === 'document' || entry.type === 'tag' || entry.type === 'operation'\n\n/**\n * Retrieves the corresponding OpenAPI object (document, tag, or operation) from the workspace store based on the provided entry.\n *\n * This helper abstracts the common lookup logic for working with sidebar/drag-and-drop entries and their associated OpenAPI objects.\n * Returns `null` when the lookup cannot be completed (e.g., document/tag/operation not found).\n *\n * @template Entry Either TraversedDocument, TraversedTag, or TraversedOperation.\n * @param store - The workspace store containing loaded documents.\n * @param entry - The sidebar entry (document, tag, or operation).\n * @returns The corresponding OpenAPI object (WorkspaceDocument, TagObject, or OperationObject) or `null` if not found.\n *\n * @example\n * // For a Document entry:\n * const document = getOpenapiObject({ store, entry: documentEntry })\n *\n * // For a Tag entry:\n * const tag = getOpenapiObject({ store, entry: tagEntry })\n *\n * // For an Operation entry:\n * const operation = getOpenapiObject({ store, entry: operationEntry })\n */\nexport const getOpenapiObject = <Entry extends TraversedOrderable>({\n  store,\n  entry,\n}: {\n  store: WorkspaceStore\n  entry: Entry\n}): GetOpenapiObject<Entry> | null => {\n  const documentEntry = getParentEntry('document', entry)\n  if (!documentEntry) {\n    return null\n  }\n\n  const document = store.workspace.documents[documentEntry.name]\n  if (!document) {\n    return null\n  }\n\n  if (entry.type === 'document') {\n    return document as GetOpenapiObject<Entry>\n  }\n\n  if (entry.type === 'tag') {\n    // Find the tag by name in the document's tags array\n    return (document.tags?.find((tag) => tag.name === entry.name) as GetOpenapiObject<Entry> | undefined) ?? null\n  }\n\n  if (entry.type === 'operation') {\n    // Fetch and resolve the referenced operation object at the given path/method\n    return (getResolvedRef(document.paths?.[entry.path]?.[entry.method]) as GetOpenapiObject<Entry> | undefined) ?? null\n  }\n\n  // If entry type is unknown, return null\n  return null\n}\n"],
  "mappings": "AACA,SAAS,sBAAsB;AAK/B,SAAS,sBAAsB;AAaxB,MAAM,eAAe,CAAC,UAC3B,MAAM,SAAS,cAAc,MAAM,SAAS,SAAS,MAAM,SAAS;AAuB/D,MAAM,mBAAmB,CAAmC;AAAA,EACjE;AAAA,EACA;AACF,MAGsC;AACpC,QAAM,gBAAgB,eAAe,YAAY,KAAK;AACtD,MAAI,CAAC,eAAe;AAClB,WAAO;AAAA,EACT;AAEA,QAAM,WAAW,MAAM,UAAU,UAAU,cAAc,IAAI;AAC7D,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AAEA,MAAI,MAAM,SAAS,YAAY;AAC7B,WAAO;AAAA,EACT;AAEA,MAAI,MAAM,SAAS,OAAO;AAExB,WAAQ,SAAS,MAAM,KAAK,CAAC,QAAQ,IAAI,SAAS,MAAM,IAAI,KAA6C;AAAA,EAC3G;AAEA,MAAI,MAAM,SAAS,aAAa;AAE9B,WAAQ,eAAe,SAAS,QAAQ,MAAM,IAAI,IAAI,MAAM,MAAM,CAAC,KAA6C;AAAA,EAClH;AAGA,SAAO;AACT;",
  "names": []
}
