{
  "version": 3,
  "sources": ["../../../src/navigation/helpers/get-operation-entries.ts"],
  "sourcesContent": ["import type {\n  TraversedDocument,\n  TraversedEntry,\n  TraversedOperation,\n  TraversedWebhook,\n  WithParent,\n} from '@/schemas/navigation'\n\nexport type OperationEntriesMap = Map<string, (WithParent<TraversedOperation> | WithParent<TraversedWebhook>)[]>\n\n/**\n * Builds a map of all operations and webhooks in a document, indexed by path/name and method.\n *\n * This function recursively traverses the document structure and collects all operation and webhook\n * entries. Multiple entries can share the same path|method key (for example, when operations are\n * duplicated across different tags or groups).\n *\n * ~Performance note: If this function is called frequently, consider generating this map once when\n * creating the sidebar state rather than recalculating it in mutators.~\n * Update: we are now generating it features/operation and its drilled down from there\n *\n * @param document - The traversed OpenAPI document to extract operations from\n * @returns A map where keys are `path|method` (for operations) or `name|method` (for webhooks),\n *          and values are arrays of matching entries. The pipe separator is used to create a\n *          unique composite key from the two parts.\n *\n * @example\n * const entries = getOperationEntries(document)\n * const getUsers = entries.get('/users|get') // Array of all GET /users operations\n */\nexport const getOperationEntries = (document: TraversedDocument): OperationEntriesMap => {\n  const map: OperationEntriesMap = new Map()\n\n  /**\n   * Helper function to add an entry to the map under the specified key.\n   * If the key already exists, appends to the array; otherwise creates a new array.\n   *\n   * @param key - The composite key (path|method or name|method)\n   * @param entry - The operation or webhook entry to add (with parent information)\n   */\n  const addToMap = (key: string, entry: WithParent<TraversedOperation> | WithParent<TraversedWebhook>): void => {\n    const existing = map.get(key)\n    if (existing) {\n      existing.push(entry)\n    } else {\n      map.set(key, [entry])\n    }\n  }\n\n  /**\n   * Recursively traverses the document tree to find all operations and webhooks.\n   * Handles three entry types:\n   * - operations: collected into the map using path|method as key\n   * - webhooks: collected into the map using name|method as key\n   * - containers (tags, groups): recursively traversed for their children\n   *\n   * @param entries - Array of entries to traverse (may be undefined for empty sections)\n   * @param parent - The parent entry of the current entries (if any)\n   */\n  const traverse = (\n    entries: TraversedEntry[] | undefined,\n    parent: WithParent<TraversedEntry> | TraversedDocument,\n  ): void => {\n    if (!entries) {\n      return\n    }\n\n    for (const entry of entries) {\n      // Handle operations - use path and method to create unique key\n      if (entry.type === 'operation') {\n        const key = `${entry.path}|${entry.method}`\n        addToMap(key, { ...entry, parent })\n      }\n      // Handle webhooks - use name and method to create unique key\n      else if (entry.type === 'webhook') {\n        const key = `${entry.name}|${entry.method}`\n        addToMap(key, { ...entry, parent })\n      }\n      // Handle containers - recursively traverse children, passing current entry as parent\n      else if ('children' in entry && entry.children) {\n        traverse(entry.children, { ...entry, parent })\n      }\n    }\n  }\n\n  // Start traversal from document root\n  traverse(document.children, document)\n\n  return map\n}\n"],
  "mappings": "AA8BO,MAAM,sBAAsB,CAAC,aAAqD;AACvF,QAAM,MAA2B,oBAAI,IAAI;AASzC,QAAM,WAAW,CAAC,KAAa,UAA+E;AAC5G,UAAM,WAAW,IAAI,IAAI,GAAG;AAC5B,QAAI,UAAU;AACZ,eAAS,KAAK,KAAK;AAAA,IACrB,OAAO;AACL,UAAI,IAAI,KAAK,CAAC,KAAK,CAAC;AAAA,IACtB;AAAA,EACF;AAYA,QAAM,WAAW,CACf,SACA,WACS;AACT,QAAI,CAAC,SAAS;AACZ;AAAA,IACF;AAEA,eAAW,SAAS,SAAS;AAE3B,UAAI,MAAM,SAAS,aAAa;AAC9B,cAAM,MAAM,GAAG,MAAM,IAAI,IAAI,MAAM,MAAM;AACzC,iBAAS,KAAK,EAAE,GAAG,OAAO,OAAO,CAAC;AAAA,MACpC,WAES,MAAM,SAAS,WAAW;AACjC,cAAM,MAAM,GAAG,MAAM,IAAI,IAAI,MAAM,MAAM;AACzC,iBAAS,KAAK,EAAE,GAAG,OAAO,OAAO,CAAC;AAAA,MACpC,WAES,cAAc,SAAS,MAAM,UAAU;AAC9C,iBAAS,MAAM,UAAU,EAAE,GAAG,OAAO,OAAO,CAAC;AAAA,MAC/C;AAAA,IACF;AAAA,EACF;AAGA,WAAS,SAAS,UAAU,QAAQ;AAEpC,SAAO;AACT;",
  "names": []
}
