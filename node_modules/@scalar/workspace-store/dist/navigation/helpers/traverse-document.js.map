{
  "version": 3,
  "sources": ["../../../src/navigation/helpers/traverse-document.ts"],
  "sourcesContent": ["import { unpackProxyObject } from '@/helpers/unpack-proxy'\nimport { type NavigationOptions, getNavigationOptions } from '@/navigation/get-navigation-options'\nimport type { TagsMap } from '@/navigation/types'\nimport type { TraversedDocument, TraversedEntry } from '@/schemas/navigation'\nimport type { OpenApiDocument } from '@/schemas/v3.1/strict/openapi-document'\n\nimport { traverseDescription } from './traverse-description'\nimport { traversePaths } from './traverse-paths'\nimport { traverseSchemas } from './traverse-schemas'\nimport { traverseTags } from './traverse-tags'\nimport { traverseWebhooks } from './traverse-webhooks'\n\n/**\n * Traverses an OpenAPI Document to generate navigation structure and metadata.\n *\n * This function processes the OpenAPI document to create:\n * - A hierarchical navigation structure for the sidebar\n * - A mapping of IDs to titles for mobile header navigation\n * - Tag-based organization of operations and webhooks\n * - Optional schema/model documentation\n */\nexport const traverseDocument = (documentName: string, document: OpenApiDocument, options?: NavigationOptions) => {\n  const { hideModels, tagsSorter, operationsSorter, generateId } = getNavigationOptions(documentName, options)\n\n  const documentId = generateId({\n    type: 'document',\n    info: document.info,\n    name: documentName,\n  })\n\n  /** Map of tags and their entries */\n  const tagsMap: TagsMap = new Map(\n    document.tags?.map((tag) => [\n      tag.name ?? 'Untitled Tag',\n      { id: generateId({ type: 'tag', tag, parentId: documentId }), parentId: documentId, tag, entries: [] },\n    ]) ?? [],\n  )\n\n  /** Generate entries for the document info description field */\n  const entries: TraversedEntry[] = traverseDescription({\n    generateId,\n    parentId: documentId,\n    info: document.info,\n  })\n\n  /** Traverse all the document path  */\n  const { untaggedOperations } = traversePaths({ document, tagsMap, generateId, documentId })\n\n  const untaggedWebhooksParentId = generateId({\n    type: 'webhook',\n    name: '',\n    parentId: documentId,\n  })\n\n  const untaggedWebhooks = traverseWebhooks({\n    document,\n    generateId,\n    tagsMap,\n    untaggedWebhooksParentId,\n    documentId,\n  })\n\n  const tagsEntries = traverseTags({\n    document,\n    tagsMap,\n    documentId,\n    options: { tagsSorter, operationsSorter, generateId },\n  })\n\n  // Add tagged operations, webhooks and tagGroups\n  entries.push(...tagsEntries)\n  // Add untagged operations\n  entries.push(...untaggedOperations)\n\n  // Add untagged webhooks\n  if (untaggedWebhooks.length) {\n    entries.push({\n      type: 'tag',\n      id: untaggedWebhooksParentId,\n      title: 'Webhooks',\n      name: 'Webhooks',\n      children: untaggedWebhooks,\n      isGroup: false,\n      isWebhooks: true,\n    })\n  }\n\n  // Add models if they are not hidden\n  if (!hideModels && document.components?.schemas) {\n    const untaggedModels = traverseSchemas({\n      documentId,\n      document,\n      generateId,\n      tagsMap,\n    })\n\n    if (untaggedModels.length) {\n      entries.push({\n        type: 'models',\n        id: generateId({\n          type: 'model',\n          parentId: documentId,\n        }),\n        title: 'Models',\n        name: 'Models',\n        children: untaggedModels,\n      })\n    }\n  }\n\n  const sortOrder = document['x-scalar-order']\n\n  // Try to sort the entries using the x-scalar-order\n  if (sortOrder) {\n    entries.sort((a, b) => {\n      const indexA = sortOrder.indexOf(a.id)\n      const indexB = sortOrder.indexOf(b.id)\n      // If an id is not found, treat it as \"infinity\" so those items go last.\n      const safeIndexA = indexA === -1 ? Number.POSITIVE_INFINITY : indexA\n      const safeIndexB = indexB === -1 ? Number.POSITIVE_INFINITY : indexB\n      return safeIndexA - safeIndexB\n    })\n  }\n\n  // Now update the sort order of the entries\n  document['x-scalar-order'] = unpackProxyObject(entries.map((entry) => entry.id))\n\n  return {\n    id: documentId,\n    type: 'document',\n    title: document.info.title,\n    name: documentName,\n    children: entries,\n    icon: document['x-scalar-icon'],\n  } satisfies TraversedDocument\n}\n"],
  "mappings": "AAAA,SAAS,yBAAyB;AAClC,SAAiC,4BAA4B;AAK7D,SAAS,2BAA2B;AACpC,SAAS,qBAAqB;AAC9B,SAAS,uBAAuB;AAChC,SAAS,oBAAoB;AAC7B,SAAS,wBAAwB;AAW1B,MAAM,mBAAmB,CAAC,cAAsB,UAA2B,YAAgC;AAChH,QAAM,EAAE,YAAY,YAAY,kBAAkB,WAAW,IAAI,qBAAqB,cAAc,OAAO;AAE3G,QAAM,aAAa,WAAW;AAAA,IAC5B,MAAM;AAAA,IACN,MAAM,SAAS;AAAA,IACf,MAAM;AAAA,EACR,CAAC;AAGD,QAAM,UAAmB,IAAI;AAAA,IAC3B,SAAS,MAAM,IAAI,CAAC,QAAQ;AAAA,MAC1B,IAAI,QAAQ;AAAA,MACZ,EAAE,IAAI,WAAW,EAAE,MAAM,OAAO,KAAK,UAAU,WAAW,CAAC,GAAG,UAAU,YAAY,KAAK,SAAS,CAAC,EAAE;AAAA,IACvG,CAAC,KAAK,CAAC;AAAA,EACT;AAGA,QAAM,UAA4B,oBAAoB;AAAA,IACpD;AAAA,IACA,UAAU;AAAA,IACV,MAAM,SAAS;AAAA,EACjB,CAAC;AAGD,QAAM,EAAE,mBAAmB,IAAI,cAAc,EAAE,UAAU,SAAS,YAAY,WAAW,CAAC;AAE1F,QAAM,2BAA2B,WAAW;AAAA,IAC1C,MAAM;AAAA,IACN,MAAM;AAAA,IACN,UAAU;AAAA,EACZ,CAAC;AAED,QAAM,mBAAmB,iBAAiB;AAAA,IACxC;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,QAAM,cAAc,aAAa;AAAA,IAC/B;AAAA,IACA;AAAA,IACA;AAAA,IACA,SAAS,EAAE,YAAY,kBAAkB,WAAW;AAAA,EACtD,CAAC;AAGD,UAAQ,KAAK,GAAG,WAAW;AAE3B,UAAQ,KAAK,GAAG,kBAAkB;AAGlC,MAAI,iBAAiB,QAAQ;AAC3B,YAAQ,KAAK;AAAA,MACX,MAAM;AAAA,MACN,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,MAAM;AAAA,MACN,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,IACd,CAAC;AAAA,EACH;AAGA,MAAI,CAAC,cAAc,SAAS,YAAY,SAAS;AAC/C,UAAM,iBAAiB,gBAAgB;AAAA,MACrC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAED,QAAI,eAAe,QAAQ;AACzB,cAAQ,KAAK;AAAA,QACX,MAAM;AAAA,QACN,IAAI,WAAW;AAAA,UACb,MAAM;AAAA,UACN,UAAU;AAAA,QACZ,CAAC;AAAA,QACD,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AAEA,QAAM,YAAY,SAAS,gBAAgB;AAG3C,MAAI,WAAW;AACb,YAAQ,KAAK,CAAC,GAAG,MAAM;AACrB,YAAM,SAAS,UAAU,QAAQ,EAAE,EAAE;AACrC,YAAM,SAAS,UAAU,QAAQ,EAAE,EAAE;AAErC,YAAM,aAAa,WAAW,KAAK,OAAO,oBAAoB;AAC9D,YAAM,aAAa,WAAW,KAAK,OAAO,oBAAoB;AAC9D,aAAO,aAAa;AAAA,IACtB,CAAC;AAAA,EACH;AAGA,WAAS,gBAAgB,IAAI,kBAAkB,QAAQ,IAAI,CAAC,UAAU,MAAM,EAAE,CAAC;AAE/E,SAAO;AAAA,IACL,IAAI;AAAA,IACJ,MAAM;AAAA,IACN,OAAO,SAAS,KAAK;AAAA,IACrB,MAAM;AAAA,IACN,UAAU;AAAA,IACV,MAAM,SAAS,eAAe;AAAA,EAChC;AACF;",
  "names": []
}
