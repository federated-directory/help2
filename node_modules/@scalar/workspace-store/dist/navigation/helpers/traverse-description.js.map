{
  "version": 3,
  "sources": ["../../../src/navigation/helpers/traverse-description.ts"],
  "sourcesContent": ["import { getHeadingsFromMarkdown, getLowestHeadingLevel } from '@/navigation/helpers/utils'\nimport type { Heading, TraverseSpecOptions } from '@/navigation/types'\nimport type { TraversedDescription } from '@/schemas/navigation'\nimport type { InfoObject } from '@/schemas/v3.1/strict/info'\n\nconst DEFAULT_INTRODUCTION_SLUG = 'introduction'\n\n/**\n * Creates a hierarchical navigation structure from markdown headings in an OpenAPI description.\n *\n * The function processes markdown headings to create a two-level navigation tree:\n * - Level 1: Main sections (based on the lowest heading level found)\n * - Level 2: Subsections (one level deeper than the main sections)\n *\n * If the description starts with content rather than a heading, an \"Introduction\" section\n * is automatically added as the first entry.\n *\n * @param description - The markdown description text to process\n * @param entitiesMap - Map to store heading IDs and titles for mobile header navigation\n * @param getHeadingId - Function to generate unique IDs for headings\n * @returns Array of navigation entries with their hierarchy\n */\nexport const traverseDescription = ({\n  generateId,\n  parentId,\n  info,\n}: {\n  generateId: TraverseSpecOptions['generateId']\n  parentId: string\n  info: InfoObject\n}): TraversedDescription[] => {\n  if (!info.description?.trim()) {\n    return []\n  }\n\n  const headings = getHeadingsFromMarkdown(info.description)\n  const lowestLevel = getLowestHeadingLevel(headings)\n\n  const entries: TraversedDescription[] = []\n  let currentParent: TraversedDescription | null = null\n\n  // Add \"Introduction\" as the first heading\n  if (info.description && !info.description.trim().startsWith('#')) {\n    const heading: Heading = {\n      depth: 1,\n      value: 'Introduction',\n      slug: DEFAULT_INTRODUCTION_SLUG,\n    }\n\n    const id = generateId({\n      type: 'text',\n      depth: heading.depth,\n      slug: heading.slug,\n      parentId: parentId,\n      info: info,\n      value: heading.value,\n    })\n    const title = heading.value\n\n    const entry = {\n      id,\n      title,\n      type: 'text',\n    } satisfies TraversedDescription\n\n    // Push to entries\n    entries.push(entry)\n  }\n\n  // Traverse for the rest\n  for (const heading of headings) {\n    if (heading.depth !== lowestLevel && heading.depth !== lowestLevel + 1) {\n      continue\n    }\n\n    const entry: TraversedDescription = {\n      id: generateId({\n        type: 'text',\n        depth: heading.depth,\n        slug: heading.slug,\n        parentId: parentId,\n        info: info,\n        value: heading.value,\n      }),\n      title: heading.value,\n      type: 'text',\n    }\n\n    if (heading.depth === lowestLevel) {\n      entry.children = []\n      entries.push(entry)\n      currentParent = entry\n    } else if (currentParent) {\n      currentParent.children?.push(entry)\n    }\n  }\n\n  return entries\n}\n"],
  "mappings": "AAAA,SAAS,yBAAyB,6BAA6B;AAK/D,MAAM,4BAA4B;AAiB3B,MAAM,sBAAsB,CAAC;AAAA,EAClC;AAAA,EACA;AAAA,EACA;AACF,MAI8B;AAC5B,MAAI,CAAC,KAAK,aAAa,KAAK,GAAG;AAC7B,WAAO,CAAC;AAAA,EACV;AAEA,QAAM,WAAW,wBAAwB,KAAK,WAAW;AACzD,QAAM,cAAc,sBAAsB,QAAQ;AAElD,QAAM,UAAkC,CAAC;AACzC,MAAI,gBAA6C;AAGjD,MAAI,KAAK,eAAe,CAAC,KAAK,YAAY,KAAK,EAAE,WAAW,GAAG,GAAG;AAChE,UAAM,UAAmB;AAAA,MACvB,OAAO;AAAA,MACP,OAAO;AAAA,MACP,MAAM;AAAA,IACR;AAEA,UAAM,KAAK,WAAW;AAAA,MACpB,MAAM;AAAA,MACN,OAAO,QAAQ;AAAA,MACf,MAAM,QAAQ;AAAA,MACd;AAAA,MACA;AAAA,MACA,OAAO,QAAQ;AAAA,IACjB,CAAC;AACD,UAAM,QAAQ,QAAQ;AAEtB,UAAM,QAAQ;AAAA,MACZ;AAAA,MACA;AAAA,MACA,MAAM;AAAA,IACR;AAGA,YAAQ,KAAK,KAAK;AAAA,EACpB;AAGA,aAAW,WAAW,UAAU;AAC9B,QAAI,QAAQ,UAAU,eAAe,QAAQ,UAAU,cAAc,GAAG;AACtE;AAAA,IACF;AAEA,UAAM,QAA8B;AAAA,MAClC,IAAI,WAAW;AAAA,QACb,MAAM;AAAA,QACN,OAAO,QAAQ;AAAA,QACf,MAAM,QAAQ;AAAA,QACd;AAAA,QACA;AAAA,QACA,OAAO,QAAQ;AAAA,MACjB,CAAC;AAAA,MACD,OAAO,QAAQ;AAAA,MACf,MAAM;AAAA,IACR;AAEA,QAAI,QAAQ,UAAU,aAAa;AACjC,YAAM,WAAW,CAAC;AAClB,cAAQ,KAAK,KAAK;AAClB,sBAAgB;AAAA,IAClB,WAAW,eAAe;AACxB,oBAAc,UAAU,KAAK,KAAK;AAAA,IACpC;AAAA,EACF;AAEA,SAAO;AACT;",
  "names": []
}
