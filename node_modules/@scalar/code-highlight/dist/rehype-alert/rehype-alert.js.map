{
  "version": 3,
  "sources": ["../../src/rehype-alert/rehype-alert.ts"],
  "sourcesContent": ["import type { Element } from 'hast'\nimport type { Root } from 'mdast'\nimport { visit } from 'unist-util-visit'\n\nconst ALERT_TYPES = ['note', 'tip', 'important', 'warning', 'caution', 'success'] as const\n\n// Simple whitespace check function\nfunction isWhitespace(node: any): boolean {\n  return node.type === 'text' && typeof node.value === 'string' && /^\\s*$/.test(node.value)\n}\n\nexport function rehypeAlert() {\n  return (tree: Root) => {\n    visit(tree, 'element', (node: Element, index, parent: any) => {\n      if (node.tagName !== 'blockquote' || typeof index !== 'number' || !parent || parent.type !== 'root') {\n        return\n      }\n\n      // Find the first non-whitespace child\n      const headIndex = node.children.findIndex((child) => !isWhitespace(child))\n      if (headIndex === -1) {\n        return\n      }\n\n      const head = node.children[headIndex]\n\n      if (!head || head.type !== 'element' || head.tagName !== 'p') {\n        return\n      }\n\n      const text = head.children[0]\n      if (!text || text.type !== 'text' || !text.value.startsWith('[!')) {\n        return\n      }\n\n      const end = text.value.indexOf(']')\n      if (end === -1) {\n        return\n      }\n\n      // Extract the alert type\n      const alertType = text.value.slice(2, end).toLowerCase() as (typeof ALERT_TYPES)[number]\n      if (!ALERT_TYPES.includes(alertType)) {\n        return\n      }\n\n      // Remove the blockquote if it's empty\n      if (end + 1 === text.value.length) {\n        const next = head.children[1]\n        if (next) {\n          if (next.type !== 'element' || next.tagName !== 'br') {\n            return\n          }\n          if (!head.children[2]) {\n            return\n          }\n          head.children = head.children.slice(2)\n          const node = head.children[0]\n          if (node && node.type === 'text' && node.value.charAt(0) === '\\n') {\n            node.value = node.value.slice(1)\n          }\n        } else {\n          const skipped = headIndex + 1 < node.children.length && isWhitespace(node.children[headIndex + 1])\n          const nextIndex = skipped ? headIndex + 2 : headIndex + 1\n          if (nextIndex >= node.children.length || node.children[nextIndex]?.type !== 'element') {\n            return\n          }\n\n          node.children = node.children.slice(nextIndex)\n        }\n      } else if (\n        text.value.charAt(end + 1) === '\\n' &&\n        // Check if the next character is a newline or a non-whitespace character\n        (end + 2 === text.value.length || !/^\\s*$/.test(text.value.slice(end + 2)))\n      ) {\n        text.value = text.value.slice(end + 2)\n      } else {\n        // Remove the alert marker if it's not followed by a newline or a non-whitespace character\n        text.value = text.value.replace(/^\\s*\\[!.*?\\]\\s*/, '')\n      }\n\n      // Extract content from paragraphs to avoid wrapping in <p> tags\n      const contentChildren = []\n      for (let i = headIndex; i < node.children.length; i++) {\n        const child = node.children[i]\n        if (child?.type === 'element' && child.tagName === 'p' && child.children) {\n          contentChildren.push(...child.children)\n        } else {\n          contentChildren.push(child)\n        }\n      }\n\n      // Replace the blockquote with a div containing the alert\n      parent.children[index] = {\n        type: 'element',\n        tagName: 'div',\n        properties: { className: ['markdown-alert', `markdown-alert-${alertType}`] },\n        children: [\n          {\n            type: 'element',\n            tagName: 'div',\n            properties: { className: ['markdown-alert-icon'] },\n            children: [],\n          },\n          {\n            type: 'element',\n            tagName: 'div',\n            properties: { className: ['markdown-alert-content'] },\n            children: [{ type: 'text', value: ' ' }, ...contentChildren],\n          },\n        ],\n      }\n    })\n  }\n}\n"],
  "mappings": "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",
  "names": ["node"]
}
