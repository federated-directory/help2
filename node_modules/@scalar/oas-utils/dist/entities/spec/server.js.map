{
  "version": 3,
  "sources": ["../../../src/entities/spec/server.ts"],
  "sourcesContent": ["import { type ENTITY_BRANDS, nanoidSchema } from '@scalar/types/utils'\nimport { z } from 'zod'\n\n/**\n * Server Variable Object\n *\n * An object representing a Server Variable for server URL template substitution.\n *\n * @see https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.1.md#server-variable-object\n */\nconst oasServerVariableSchema = z.object({\n  /**\n   * An enumeration of string values to be used if the substitution options are from a limited set. The array MUST NOT be empty.\n   */\n  enum: z.array(z.string()).optional(),\n  /**\n   * REQUIRED. The default value to use for substitution, which SHALL be sent if an alternate value is not supplied.\n   * Note this behavior is different than the Schema Object's treatment of default values, because in those cases\n   * parameter values are optional. If the enum is defined, the value MUST exist in the enum's values.\n   */\n  default: z.string().optional(),\n  /**\n   * An optional description for the server variable. CommonMark syntax MAY be used for rich text representation.\n   */\n  description: z.string().optional(),\n})\n\n/** Extended schema for server variables */\nconst extendedServerVariableSchema = oasServerVariableSchema\n  .extend({\n    /** The value of the variable */\n    value: z.string().optional(),\n  })\n  .refine((data) => {\n    // Set default to the first enum value if invalid\n    if (Array.isArray(data.enum) && !data.enum.includes(data.default ?? '') && data.enum.length > 0) {\n      data.default = data.enum[0]\n    }\n\n    if (Array.isArray(data.enum) && data.enum.length === 0) {\n      delete data.enum\n    }\n\n    // Always return true since we've modified the data to be valid\n    return true\n  })\n\n/**\n * Server Object\n *\n * An object representing a Server.\n *\n * @see https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.1.md#server-object\n */\nconst oasServerSchema = z.object({\n  /**\n   * REQUIRED. A URL to the target host. This URL supports Server Variables and MAY be relative, to indicate that\n   * the host location is relative to the location where the OpenAPI document is being served. Variable substitutions\n   * will be made when a variable is named in {brackets}.\n   */\n  url: z.string(),\n  /**\n   * An optional string describing the host designated by the URL. CommonMark syntax MAY be used for rich text\n   * representation.\n   */\n  description: z.string().optional(),\n  /** A map between a variable name and its value. The value is used for substitution in the server's URL template. */\n  variables: z.record(z.string(), extendedServerVariableSchema).optional(),\n})\n\nexport const serverSchema = oasServerSchema.extend({\n  uid: nanoidSchema.brand<ENTITY_BRANDS['SERVER']>(),\n})\n\nexport type Server = z.infer<typeof serverSchema>\nexport type ServerPayload = z.input<typeof serverSchema>\n"],
  "mappings": "AAAA,SAA6B,oBAAoB;AACjD,SAAS,SAAS;AASlB,MAAM,0BAA0B,EAAE,OAAO;AAAA;AAAA;AAAA;AAAA,EAIvC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMnC,SAAS,EAAE,OAAO,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA,EAI7B,aAAa,EAAE,OAAO,EAAE,SAAS;AACnC,CAAC;AAGD,MAAM,+BAA+B,wBAClC,OAAO;AAAA;AAAA,EAEN,OAAO,EAAE,OAAO,EAAE,SAAS;AAC7B,CAAC,EACA,OAAO,CAAC,SAAS;AAEhB,MAAI,MAAM,QAAQ,KAAK,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,KAAK,WAAW,EAAE,KAAK,KAAK,KAAK,SAAS,GAAG;AAC/F,SAAK,UAAU,KAAK,KAAK,CAAC;AAAA,EAC5B;AAEA,MAAI,MAAM,QAAQ,KAAK,IAAI,KAAK,KAAK,KAAK,WAAW,GAAG;AACtD,WAAO,KAAK;AAAA,EACd;AAGA,SAAO;AACT,CAAC;AASH,MAAM,kBAAkB,EAAE,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM/B,KAAK,EAAE,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKd,aAAa,EAAE,OAAO,EAAE,SAAS;AAAA;AAAA,EAEjC,WAAW,EAAE,OAAO,EAAE,OAAO,GAAG,4BAA4B,EAAE,SAAS;AACzE,CAAC;AAEM,MAAM,eAAe,gBAAgB,OAAO;AAAA,EACjD,KAAK,aAAa,MAA+B;AACnD,CAAC;",
  "names": []
}
