import { deepMerge } from '@scalar/object-utils/merge';
import { z } from 'zod';
import { nanoidSchema } from '../shared/utility.js';

const folderSchema = z.object({
    /** Used for database sync only */
    uid: nanoidSchema,
    /** Will correspond to the slash separate path some, some/nested or some/nested/folder */
    name: z.string().optional().default('Folder'),
    /** Folder descriptions */
    description: z.string().optional(),
    /**
     * List of uids that correspond to requests or folders
     * WARNING: while uids are used we must check that corresponding $refs are not duplicated
     */
    childUids: z.array(z.string()).default([]),
});
/** Create folder helper */
const createFolder = (payload) => deepMerge(folderSchema.parse({}), payload);

export { createFolder };
