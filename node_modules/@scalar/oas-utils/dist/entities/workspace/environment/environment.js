import { deepMerge } from '@scalar/object-utils/merge';
import { z } from 'zod';
import { nanoidSchema } from '../shared/utility.js';

const parsed = z.object({
    key: z.string(),
    value: z.string(),
});
const environmentSchema = z.object({
    uid: nanoidSchema,
    name: z.string().optional().default('Default Environment'),
    color: z.string().optional().default('blue'),
    raw: z
        .string()
        .optional()
        .default(JSON.stringify({ exampleKey: 'exampleValue' }, null, 2)),
    parsed: z.array(parsed).optional().default([]),
    isDefault: z.boolean().optional(),
});
/** Create environment helper */
const createEnvironment = (payload) => deepMerge(environmentSchema.parse({}), payload);

export { createEnvironment };
