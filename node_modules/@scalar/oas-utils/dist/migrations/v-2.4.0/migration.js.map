{
  "version": 3,
  "sources": ["../../../src/migrations/v-2.4.0/migration.ts"],
  "sourcesContent": ["import type { v_2_3_0 } from '@/migrations/v-2.3.0/types.generated'\n\nimport type { v_2_4_0 } from './types.generated'\n\n/** V-2.3.0 to V-2.4.0 migration */\nexport const migrate_v_2_4_0 = (data: v_2_3_0.DataRecord): v_2_4_0.DataRecord => {\n  console.info('Performing data migration v-2.3.0 to v-2.4.0')\n\n  const collections = Object.values(data.collections).reduce<v_2_4_0.DataRecord['collections']>((prev, c) => {\n    if (c.info?.title === 'Drafts') {\n      // Remove the servers from the draft collection\n      c.servers = []\n\n      Object.values(data.requests).forEach((request) => {\n        if (request.selectedServerUid && c.requests.includes(request.uid)) {\n          const server = data.servers[request.selectedServerUid]\n          if (server) {\n            // Update the request paths to include the server URL\n            request.path = `${server.url}${request.path}`\n          }\n          // Remove the selected server UID from the draft request\n          request.selectedServerUid = ''\n        }\n      })\n    }\n\n    prev[c.uid] = c\n    return prev\n  }, {})\n\n  return {\n    ...data,\n    collections,\n  } satisfies v_2_4_0.DataRecord\n}\n"],
  "mappings": "AAKO,MAAM,kBAAkB,CAAC,SAAiD;AAC/E,UAAQ,KAAK,8CAA8C;AAE3D,QAAM,cAAc,OAAO,OAAO,KAAK,WAAW,EAAE,OAA0C,CAAC,MAAM,MAAM;AACzG,QAAI,EAAE,MAAM,UAAU,UAAU;AAE9B,QAAE,UAAU,CAAC;AAEb,aAAO,OAAO,KAAK,QAAQ,EAAE,QAAQ,CAAC,YAAY;AAChD,YAAI,QAAQ,qBAAqB,EAAE,SAAS,SAAS,QAAQ,GAAG,GAAG;AACjE,gBAAM,SAAS,KAAK,QAAQ,QAAQ,iBAAiB;AACrD,cAAI,QAAQ;AAEV,oBAAQ,OAAO,GAAG,OAAO,GAAG,GAAG,QAAQ,IAAI;AAAA,UAC7C;AAEA,kBAAQ,oBAAoB;AAAA,QAC9B;AAAA,MACF,CAAC;AAAA,IACH;AAEA,SAAK,EAAE,GAAG,IAAI;AACd,WAAO;AAAA,EACT,GAAG,CAAC,CAAC;AAEL,SAAO;AAAA,IACL,GAAG;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
