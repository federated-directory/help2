{
  "version": 3,
  "sources": ["../../src/migrations/local-storage.ts"],
  "sourcesContent": ["import type { LS_KEYS } from '@scalar/helpers/object/local-storage'\nimport { parse } from 'flatted'\n\nimport { DATA_VERSION_LS_LEY } from '@/migrations/data-version'\nimport type { v_2_1_0 } from '@/migrations/v-2.1.0/types.generated'\n\n/**\n * Supports pre-flatted local storage\n */\nexport const parseLocalStorage = (lsKey: (typeof LS_KEYS)[keyof typeof LS_KEYS]): Record<string, unknown> => {\n  const item = localStorage.getItem(lsKey) || '[{}]'\n  const data = item[0] === '[' ? parse(item) : JSON.parse(item)\n\n  return data\n}\n\n/** Take a best guess of the localStorage version */\nexport const getLocalStorageVersion = (): string => {\n  const collectionStr = localStorage.getItem('collection')\n  const dataVersion = localStorage.getItem(DATA_VERSION_LS_LEY)\n  if (dataVersion) {\n    return dataVersion\n  }\n\n  // No flatted means first version\n  if (!collectionStr?.length || collectionStr?.[0] === '{') {\n    return '0.0.0'\n  }\n\n  // Flatted + types means > 2.1.0 but we should have a data version\n  try {\n    const [collection] = Object.values(parse(collectionStr) ?? {}) as v_2_1_0.Collection[]\n    if (collection?.type === 'collection') {\n      return '2.1.0'\n    }\n\n    return '0.0.0'\n  } catch (e) {\n    console.error(e)\n\n    return '0.0.0'\n  }\n}\n"],
  "mappings": "AACA,SAAS,aAAa;AAEtB,SAAS,2BAA2B;AAM7B,MAAM,oBAAoB,CAAC,UAA2E;AAC3G,QAAM,OAAO,aAAa,QAAQ,KAAK,KAAK;AAC5C,QAAM,OAAO,KAAK,CAAC,MAAM,MAAM,MAAM,IAAI,IAAI,KAAK,MAAM,IAAI;AAE5D,SAAO;AACT;AAGO,MAAM,yBAAyB,MAAc;AAClD,QAAM,gBAAgB,aAAa,QAAQ,YAAY;AACvD,QAAM,cAAc,aAAa,QAAQ,mBAAmB;AAC5D,MAAI,aAAa;AACf,WAAO;AAAA,EACT;AAGA,MAAI,CAAC,eAAe,UAAU,gBAAgB,CAAC,MAAM,KAAK;AACxD,WAAO;AAAA,EACT;AAGA,MAAI;AACF,UAAM,CAAC,UAAU,IAAI,OAAO,OAAO,MAAM,aAAa,KAAK,CAAC,CAAC;AAC7D,QAAI,YAAY,SAAS,cAAc;AACrC,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT,SAAS,GAAG;AACV,YAAQ,MAAM,CAAC;AAEf,WAAO;AAAA,EACT;AACF;",
  "names": []
}
