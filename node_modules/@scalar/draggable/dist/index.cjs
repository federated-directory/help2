"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue"),n=r.ref(null),o=r.ref(null),E=(f,u)=>{let i=!1;return function(...t){i||(f(...t),i=!0,setTimeout(()=>i=!1,u))}},S=["draggable"],_=r.defineComponent({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(f,{expose:u,emit:i}){const t=f,g=i,d=r.computed(()=>(t.parentIds.length??0)>0?t.parentIds[t.parentIds.length-1]:null),m=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||!t.isDraggable||(e.target.classList.add("dragging"),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",n.value={id:t.id,parentId:d.value},g("onDragStart",{id:t.id,parentId:d.value}))},D=e=>typeof t.isDroppable=="function"?t.isDroppable(n.value,{id:t.id,parentId:d.value,offset:e}):t.isDroppable,c=E(e=>{if(!n.value||n.value.id===t.id||t.parentIds.includes(n.value?.id??""))return;const a=o.value?.offset,s=e.target.offsetHeight,p=t.floor*s,v=t.ceiling*s;let l=3;e.offsetY<=0&&a&&a!==3?l=a:e.offsetY<=p?l=0:e.offsetY>=v?l=1:e.offsetY>p&&e.offsetY<v&&(l=2),D(l)&&(o.value={id:t.id,parentId:d.value,offset:l})},25),b=["above","below","asChild"],I=r.computed(()=>{let e="sidebar-indent-nested";return t.id===o.value?.id&&(e+=` dragover-${b[o.value.offset]}`),e}),h=()=>{if(!o.value||!n.value)return;const e={...n.value},a={...o.value};n.value=null,o.value=null,document.querySelectorAll("div.dragging").forEach(s=>s.classList.remove("dragging")),e.id!==a.id&&g("onDragEnd",e,a)};return u({draggingItem:n,hoveredItem:o}),(e,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(I.value),draggable:e.isDraggable,onDragend:h,onDragover:a[0]||(a[0]=r.withModifiers((...s)=>r.unref(c)&&r.unref(c)(...s),["prevent","stop"])),onDragstart:r.withModifiers(m,["stop"])},[r.renderSlot(e.$slots,"default")],42,S))}});exports.Draggable=_;
