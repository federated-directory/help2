{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["import type { z } from 'zod'\n\nimport { type Events, type analyticsEventData, analyticsEventEnum, analyticsEvents } from '@/events'\n\nexport const analyticsFactory = (\n  /**\n   * Base URL for the API. For Scalar services all services live\n   * at a root path of the baseUrl\n   *\n   * ex. https://services.scalar.com/core/<endpointName>\n   *     or\n   *     http://localhost:9999/core/<endpointName>\n   */\n  baseUrl: string,\n  /**\n   * Getter function to retrieve the active auth token\n   * This will be run on each request\n   */\n  getAuthToken: () => string | null,\n) => {\n  async function capture<E extends Events>(\n    event: E,\n    ...[data]: z.input<(typeof analyticsEventData)[E]> extends undefined\n      ? []\n      : [z.input<(typeof analyticsEventData)[E]>]\n  ) {\n    if (import.meta.env.DEV) {\n      return\n    }\n\n    if (!analyticsEvents.includes(event)) {\n      throw new Error('[Analytics]: Invalid event submission')\n    }\n\n    const authToken = getAuthToken()\n\n    await fetch(`${baseUrl}/analytics/send`, {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json',\n        ...(authToken ? { 'authorization': `Bearer ${authToken}` } : {}),\n      },\n      body: JSON.stringify({\n        event,\n        data,\n      }),\n    })\n  }\n\n  return {\n    capture,\n  }\n}\n\nexport { analyticsEventEnum }\n"],
  "mappings": "AAEA,SAA+C,oBAAoB,uBAAuB;AAEnF,MAAM,mBAAmB,CAS9B,SAKA,iBACG;AACH,iBAAe,QACb,UACG,CAAC,IAAI,GAGR;AACA,QAAI,YAAY,IAAI,KAAK;AACvB;AAAA,IACF;AAEA,QAAI,CAAC,gBAAgB,SAAS,KAAK,GAAG;AACpC,YAAM,IAAI,MAAM,uCAAuC;AAAA,IACzD;AAEA,UAAM,YAAY,aAAa;AAE/B,UAAM,MAAM,GAAG,OAAO,mBAAmB;AAAA,MACvC,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,GAAI,YAAY,EAAE,iBAAiB,UAAU,SAAS,GAAG,IAAI,CAAC;AAAA,MAChE;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AAEA,SAAO;AAAA,IACL;AAAA,EACF;AACF;",
  "names": []
}
