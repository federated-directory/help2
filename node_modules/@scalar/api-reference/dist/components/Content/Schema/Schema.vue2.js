import { defineComponent as D, computed as O, openBlock as l, createBlock as t, unref as r, withCtx as h, createElementVNode as P, normalizeClass as p, createElementBlock as o, createVNode as d, createCommentVNode as s, withDirectives as q, normalizeStyle as N, Fragment as i, createTextVNode as C, toDisplayString as S, vShow as V, renderList as z } from "vue";
import { Disclosure as A, DisclosureButton as E, DisclosurePanel as H } from "@headlessui/vue";
import { ScalarMarkdown as T, ScalarIcon as w } from "@scalar/components";
import $ from "./SchemaHeading.vue.js";
import m from "./SchemaProperty.vue.js";
const F = {
  key: 0,
  class: "schema-card-description"
}, K = /* @__PURE__ */ D({
  __name: "Schema",
  props: {
    value: {},
    level: { default: 0 },
    name: {},
    compact: { type: Boolean },
    noncollapsible: { type: Boolean }
  },
  setup(B) {
    const v = B, y = O(() => !(v.noncollapsible || v.level === 0)), j = (e) => v.noncollapsible && e.stopPropagation();
    return (e, I) => typeof e.value == "object" && Object.keys(e.value).length ? (l(), t(r(A), {
      key: 0,
      defaultOpen: e.noncollapsible
    }, {
      default: h(({ open: n }) => {
        var k;
        return [
          P("div", {
            class: p(["schema-card", [
              `schema-card--level-${e.level}`,
              { "schema-card--compact": e.compact, "schema-card--open": n }
            ]])
          }, [
            (k = e.value) != null && k.description && typeof e.value.description == "string" ? (l(), o("div", F, [
              d(r(T), {
                value: e.value.description
              }, null, 8, ["value"])
            ])) : s("", !0),
            P("div", {
              class: p(["schema-properties", { "schema-properties-open": n }])
            }, [
              q(d(r(E), {
                as: e.noncollapsible ? "div" : "button",
                class: p(["schema-card-title", { "schema-card-title--compact": e.compact }]),
                style: N({
                  top: `calc(var(--refs-header-height) +  calc(var(--schema-title-height) * ${e.level}))`
                }),
                onClickCapture: j
              }, {
                default: h(() => {
                  var c, a, u;
                  return [
                    e.compact ? (l(), o(i, { key: 0 }, [
                      y.value ? (l(), t(r(w), {
                        key: 0,
                        class: p(["schema-card-title-icon h-2.5", { "schema-card-title-icon--open": n }]),
                        icon: "Add",
                        thickness: "3"
                      }, null, 8, ["class"])) : s("", !0),
                      n ? (l(), o(i, { key: 1 }, [
                        C(" Hide " + S(((c = e.value) == null ? void 0 : c.title) ?? "Child Attributes"), 1)
                      ], 64)) : (l(), o(i, { key: 2 }, [
                        C(" Show " + S(((a = e.value) == null ? void 0 : a.title) ?? "Child Attributes"), 1)
                      ], 64))
                    ], 64)) : (l(), o(i, { key: 1 }, [
                      y.value ? (l(), t(r(w), {
                        key: 0,
                        class: p(["schema-card-title-icon", { "schema-card-title-icon--open": n }]),
                        icon: "ChevronRight",
                        size: "md"
                      }, null, 8, ["class"])) : s("", !0),
                      d($, {
                        name: ((u = e.value) == null ? void 0 : u.title) ?? e.name,
                        value: e.value
                      }, null, 8, ["name", "value"])
                    ], 64))
                  ];
                }),
                _: 2
              }, 1032, ["as", "class", "style"]), [
                [V, !(e.noncollapsible && e.compact)]
              ]),
              d(r(H), { static: e.noncollapsible }, {
                default: h(() => {
                  var c;
                  return [
                    e.value.properties || e.value.additionalProperties ? (l(), o(i, { key: 0 }, [
                      e.value.properties ? (l(!0), o(i, { key: 0 }, z(Object.keys((c = e.value) == null ? void 0 : c.properties), (a) => {
                        var u, f, b, g;
                        return l(), t(m, {
                          key: a,
                          compact: e.compact,
                          level: e.level,
                          name: a,
                          required: ((u = e.value.required) == null ? void 0 : u.includes(a)) || ((b = (f = e.value.properties) == null ? void 0 : f[a]) == null ? void 0 : b.required) === !0,
                          value: (g = e.value.properties) == null ? void 0 : g[a]
                        }, null, 8, ["compact", "level", "name", "required", "value"]);
                      }), 128)) : s("", !0),
                      e.value.additionalProperties ? (l(), o(i, { key: 1 }, [
                        e.value.additionalProperties === !0 || Object.keys(e.value.additionalProperties).length === 0 || !e.value.additionalProperties.type ? (l(), t(m, {
                          key: 0,
                          additional: "",
                          compact: e.compact,
                          level: e.level,
                          noncollapsible: "",
                          value: {
                            type: "anything",
                            ...typeof e.value.additionalProperties == "object" ? e.value.additionalProperties : {}
                          }
                        }, null, 8, ["compact", "level", "value"])) : (l(), t(m, {
                          key: 1,
                          additional: "",
                          compact: e.compact,
                          level: e.level,
                          noncollapsible: "",
                          value: e.value.additionalProperties
                        }, null, 8, ["compact", "level", "value"]))
                      ], 64)) : s("", !0)
                    ], 64)) : (l(), t(m, {
                      key: 1,
                      compact: e.compact,
                      level: e.level,
                      name: e.value.name,
                      value: e.value
                    }, null, 8, ["compact", "level", "name", "value"]))
                  ];
                }),
                _: 1
              }, 8, ["static"])
            ], 2)
          ], 2)
        ];
      }),
      _: 1
    }, 8, ["defaultOpen"])) : s("", !0);
  }
});
export {
  K as default
};
