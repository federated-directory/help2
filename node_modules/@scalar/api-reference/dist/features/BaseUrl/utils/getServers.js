import { findVariables as v, concatenateUrlAndPath as w } from "@scalar/oas-utils/helpers";
function S(r, l) {
  var a;
  let e = [];
  return r != null && r.servers && (r == null ? void 0 : r.servers.length) > 0 ? e = r.servers : r != null && r.host ? e = [
    {
      url: `${((a = r.schemes) == null ? void 0 : a[0]) ?? "http"}://${r.host}${(r == null ? void 0 : r.basePath) ?? ""}`
    }
  ] : e = [
    {
      url: l != null && l.defaultServerUrl ? l == null ? void 0 : l.defaultServerUrl : typeof window < "u" ? window.location.origin : "/"
    }
  ], (l != null && l.defaultServerUrl || typeof window < "u") && (e = e.map((d) => b(d, l))), e.map((d) => {
    const h = d.variables ?? {};
    return v(d.url ?? "").filter((u) => !h[u]).forEach((u) => {
      d.variables === void 0 && (d.variables = {}), d.variables[u] = {
        default: ""
      };
    }), d;
  });
}
function b(r, l) {
  var e;
  return (e = r.url) != null && e.match(/^(?!(https?|file):\/\/|{).+/) && (r.url = w(
    l != null && l.defaultServerUrl ? l == null ? void 0 : l.defaultServerUrl : typeof window < "u" ? window.location.origin : "",
    r.url
  )), r;
}
export {
  S as getServers
};
