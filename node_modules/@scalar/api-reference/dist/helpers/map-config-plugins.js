import { watch } from "vue";
const mapConfigPlugins = (config) => {
  const plugin = { hooks: {} };
  watch(
    [() => config.value.onBeforeRequest, () => config.value.onRequestSent],
    ([onBeforeRequest, onRequestSent]) => {
      if (!plugin.hooks) {
        plugin.hooks = {};
      }
      plugin.hooks.beforeRequest = onBeforeRequest ? async (payload) => {
        const result = await onBeforeRequest(payload);
        if (result === void 0) {
          return payload;
        }
        return result;
      } : void 0;
      plugin.hooks.responseReceived = onRequestSent ? (payload) => {
        onRequestSent(payload.request.url);
      } : void 0;
    },
    { immediate: true }
  );
  return [plugin];
};
export {
  mapConfigPlugins
};
