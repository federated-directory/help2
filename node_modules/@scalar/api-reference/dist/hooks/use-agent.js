import { isLocalUrl } from "@scalar/helpers/url/is-local-url";
import { ref, computed, inject } from "vue";
const AGENT_CONTEXT_SYMBOL = /* @__PURE__ */ Symbol();
const agentStateRef = ref(null);
function useAgent(options) {
  const showAgent = ref(false);
  const prefilledMessage = ref("");
  const agentEnabled = options.agentEnabled ?? computed(() => isLocalUrl(window.location.href));
  const openAgent = (message) => {
    prefilledMessage.value = message ?? "";
    showAgent.value = true;
  };
  const closeAgent = () => {
    showAgent.value = false;
    prefilledMessage.value = "";
  };
  const toggleAgent = () => {
    showAgent.value = !showAgent.value;
    if (!showAgent.value) {
      prefilledMessage.value = "";
    }
  };
  const state = {
    showAgent,
    agentEnabled,
    prefilledMessage,
    openAgent,
    closeAgent,
    toggleAgent
  };
  agentStateRef.value = state;
  return state;
}
function useAgentContext() {
  const injected = inject(AGENT_CONTEXT_SYMBOL, void 0);
  return computed(() => injected ?? agentStateRef.value ?? void 0);
}
export {
  AGENT_CONTEXT_SYMBOL,
  useAgent,
  useAgentContext
};
