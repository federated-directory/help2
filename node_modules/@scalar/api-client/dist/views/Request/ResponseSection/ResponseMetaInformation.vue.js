import { defineComponent as C, ref as m, computed as x, createElementBlock as a, openBlock as n, toDisplayString as o, unref as d, Fragment as f, createElementVNode as l, createCommentVNode as v, createTextVNode as i, createBlock as S, withCtx as I, normalizeStyle as y } from "vue";
import { httpStatusCodes as b } from "@scalar/oas-utils/helpers";
import w from "pretty-bytes";
import k from "pretty-ms";
import B from "../../../components/HelpfulLink.vue.js";
import { useWorkspace as N } from "../../../store/store.js";
const L = { class: "text-c-1 flex gap-1.5" }, V = { key: 0 }, z = { key: 0 }, D = { key: 1 }, W = /* @__PURE__ */ C({
  __name: "ResponseMetaInformation",
  props: {
    response: {}
  },
  setup(r) {
    const h = r, { events: g } = N(), u = m(), c = m(0);
    g.requestStatus.on((t) => {
      t === "start" ? u.value = setInterval(() => c.value += 1e3, 1e3) : (clearInterval(u.value), u.value = void 0, c.value = 0);
    });
    const p = (t) => {
      const e = Number.parseInt(
        t.headers?.["Content-Length"] || t.headers?.["content-length"] || "0",
        10
      );
      return e ? w(e) : void 0;
    }, s = x(() => {
      const t = h.response.status;
      if (t)
        return b[t] ?? void 0;
    });
    return (t, e) => (n(), a("div", L, [
      u.value && c.value ? (n(), a("span", V, o(d(k)(c.value)), 1)) : (n(), a(f, { key: 1 }, [
        l("span", null, [
          e[0] || (e[0] = l("span", { class: "sr-only" }, "Response Information, Duration:", -1)),
          i(" " + o(d(k)(r.response.duration)), 1)
        ]),
        p(r.response) ? (n(), a("span", z, [
          e[1] || (e[1] = l("span", { class: "sr-only" }, ", Size:", -1)),
          i(" " + o(p(r.response)), 1)
        ])) : v("", !0),
        s.value ? (n(), a(f, { key: 1 }, [
          e[2] || (e[2] = l("span", { class: "sr-only" }, ", Status:", -1)),
          s.value.url ? (n(), S(B, {
            key: 0,
            class: "flex items-center gap-1.5",
            href: s.value.url
          }, {
            default: I(() => [
              i(o(r.response.status) + " " + o(s.value.name) + " ", 1),
              l("span", {
                class: "block h-1.5 w-1.5 rounded-full",
                style: y({ backgroundColor: s.value.color })
              }, null, 4)
            ]),
            _: 1
          }, 8, ["href"])) : (n(), a("span", D, [
            i(o(r.response.status) + " " + o(s.value.name) + " ", 1),
            l("span", {
              class: "block h-1.5 w-1.5 rounded-full",
              style: y({ backgroundColor: s.value.color })
            }, null, 4)
          ]))
        ], 64)) : v("", !0)
      ], 64))
    ]));
  }
});
export {
  W as default
};
