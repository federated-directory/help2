import { defineComponent as c, ref as d, onMounted as m, onBeforeUnmount as f, createBlock as v, openBlock as l, Transition as B, withCtx as u, createElementBlock as k, createCommentVNode as g, unref as n, createVNode as i, createTextVNode as x } from "vue";
import { useLoadingState as p, ScalarLoading as q, ScalarButton as C } from "@scalar/components";
const L = {
  key: 0,
  class: "bg-b-1 z-overlay absolute inset-0 flex flex-col items-center justify-center gap-6"
}, N = /* @__PURE__ */ c({
  __name: "ResponseLoadingOverlay",
  props: {
    eventBus: {}
  },
  setup(e) {
    const t = p(), s = d(), r = () => {
      s.value = setTimeout(() => t.start(), 1e3);
    }, a = () => {
      clearTimeout(s.value), s.value = void 0, t.clear();
    };
    return m(() => {
      e.eventBus.on("hooks:on:request:sent", r), e.eventBus.on("hooks:on:request:complete", a);
    }), f(() => {
      e.eventBus.off("hooks:on:request:sent", r), e.eventBus.off("hooks:on:request:complete", a), a();
    }), (h, o) => (l(), v(B, null, {
      default: u(() => [
        n(t).isActive ? (l(), k("div", L, [
          i(n(q), {
            class: "text-c-3",
            loader: n(t),
            size: "3xl"
          }, null, 8, ["loader"]),
          i(n(C), {
            variant: "ghost",
            onClick: o[0] || (o[0] = (y) => e.eventBus.emit("operation:cancel:request"))
          }, {
            default: u(() => [...o[1] || (o[1] = [
              x(" Cancel ", -1)
            ])]),
            _: 1
          })
        ])) : g("", !0)
      ]),
      _: 1
    }));
  }
});
export {
  N as default
};
