import { replaceEnvVariables as l } from "@scalar/helpers/regex/replace-variables";
import { unpackProxyObject as m } from "@scalar/workspace-store/helpers/unpack-proxy";
import { getExampleFromBody as u } from "../../request-block/helpers/get-request-body-example.js";
const w = (e, a = {}, p = "default") => {
  if (!e)
    return null;
  const r = e?.["x-scalar-selected-content-type"]?.[p] ?? Object.keys(e?.content ?? {})[0] ?? "application/json", t = u(e, r, p);
  if (!t)
    return null;
  if ((r === "multipart/form-data" || r === "application/x-www-form-urlencoded") && Array.isArray(t.value)) {
    const s = t.value.filter((o) => !o.isDisabled), n = r === "multipart/form-data" ? new FormData() : new URLSearchParams();
    return s.forEach(({ name: o, value: i }) => {
      if (!o)
        return;
      const c = l(o, a);
      if (i instanceof File && n instanceof FormData) {
        const f = m(i);
        n.append(c, f, f.name);
      } else typeof i == "string" && n.append(c, l(i, a));
    }), n;
  }
  return typeof t.value == "object" ? l(JSON.stringify(t.value), a) : typeof t.value == "string" ? l(t.value, a) : t.value;
};
export {
  w as buildRequestBody
};
