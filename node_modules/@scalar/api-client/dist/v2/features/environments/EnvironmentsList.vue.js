import { defineComponent as E, ref as y, createElementBlock as u, openBlock as c, Fragment as v, createElementVNode as T, createVNode as r, renderList as x, createBlock as b, unref as i, withCtx as g, createTextVNode as h } from "vue";
import { useModal as d, ScalarButton as k } from "@scalar/components";
import { ScalarIconPlus as M } from "@scalar/icons";
import N from "./components/EnvironmentCreateModal.vue.js";
import S from "./components/EnvironmentDeleteModal.vue.js";
import w from "./components/Environment.vue.js";
const C = { class: "text-c-3 flex h-full items-center justify-center rounded-lg border p-4" }, A = /* @__PURE__ */ E({
  __name: "EnvironmentsList",
  props: {
    environments: {},
    eventBus: {},
    collectionType: {}
  },
  setup(e) {
    const s = d(), m = d(), t = y(null), f = (n) => {
      t.value = n, m.show();
    }, p = () => {
      t.value && e.eventBus.emit("environment:delete:environment", {
        environmentName: t.value,
        collectionType: e.collectionType
      });
    }, a = (n) => {
      t.value = n ?? null, s.show();
    };
    return (n, o) => (c(), u(v, null, [
      (c(!0), u(v, null, x(Object.entries(e.environments), ([l, B]) => (c(), b(w, {
        key: l,
        collectionType: e.collectionType,
        environment: B,
        environmentName: l,
        eventBus: e.eventBus,
        onDelete: () => f(l),
        onEdit: () => a(l)
      }, null, 8, ["collectionType", "environment", "environmentName", "eventBus", "onDelete", "onEdit"]))), 128)),
      T("div", C, [
        r(i(k), {
          class: "hover:bg-b-2 hover:text-c-1 flex items-center gap-2",
          size: "sm",
          variant: "ghost",
          onClick: o[0] || (o[0] = () => a())
        }, {
          default: g(() => [
            r(i(M)),
            o[1] || (o[1] = h(" Add Environment ", -1))
          ]),
          _: 1
        })
      ]),
      r(N, {
        collectionType: e.collectionType,
        environments: e.environments,
        eventBus: e.eventBus,
        selectedEnvironmentName: t.value,
        state: i(s)
      }, null, 8, ["collectionType", "environments", "eventBus", "selectedEnvironmentName", "state"]),
      r(S, {
        name: t.value,
        state: i(m),
        onSubmit: p
      }, null, 8, ["name", "state"])
    ], 64));
  }
});
export {
  A as default
};
