import { defineComponent as D, ref as d, computed as m, createElementBlock as i, openBlock as l, createCommentVNode as a, normalizeStyle as v, createBlock as k, unref as C, createElementVNode as n, Fragment as S, renderList as $, withDirectives as j, vModelText as N, createVNode as T, nextTick as V } from "vue";
import { ScalarIcon as f } from "@scalar/components";
const A = {
  key: 1,
  class: "color-selector flex h-4 flex-row items-center justify-between gap-1.5 space-x-1"
}, R = ["onClick"], L = {
  key: 2,
  class: "color-selector flex h-4 flex-1 items-center gap-2 rounded"
}, U = ["placeholder"], W = "linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122))", P = /* @__PURE__ */ D({
  __name: "EnvironmentColors",
  props: {
    activeColor: {}
  },
  emits: ["select"],
  setup(r, { emit: w }) {
    const F = w, t = d(""), b = d(null), s = d(!1), c = d(!1), h = [
      "#FFFFFF",
      "#EF0006",
      "#EDBE20",
      "#069061",
      "#FB892C",
      "#0082D0",
      "#5203D1",
      "#FFC0CB"
    ], E = m(
      () => h.includes(r.activeColor)
    ), x = m(
      () => r.activeColor && !E.value && !s.value
    ), I = (e) => r.activeColor === e, y = m(() => {
      const e = t.value || r.activeColor;
      return x.value || t.value ? `background-color: ${e};` : `background: ${W};`;
    }), g = async () => {
      s.value = !s.value, c.value = !1, s.value && (await V(), b.value?.focus());
    }, z = () => {
      c.value = !c.value;
    }, p = (e) => {
      const o = e && !e.startsWith("#") ? `#${e}` : e;
      F("select", o), c.value = !1;
    }, B = () => {
      if (!t.value)
        return;
      const e = t.value.startsWith("#") ? t.value : `#${t.value}`;
      t.value = e, p(e);
    };
    return (e, o) => (l(), i("div", null, [
      !s.value && !c.value ? (l(), i("div", {
        key: 0,
        class: "flex h-4 w-4 cursor-pointer items-center justify-center rounded-full",
        style: v({ backgroundColor: r.activeColor }),
        onClick: z
      }, [
        r.activeColor ? (l(), k(C(f), {
          key: 0,
          class: "text-c-btn p-0.5",
          icon: "Checkmark",
          size: "xs"
        })) : a("", !0)
      ], 4)) : a("", !0),
      !s.value && c.value ? (l(), i("div", A, [
        (l(), i(S, null, $(h, (u) => n("div", {
          key: u,
          class: "flex h-4 w-4 cursor-pointer items-center justify-center rounded-full",
          style: v({ backgroundColor: u }),
          onClick: (G) => p(u)
        }, [
          I(u) ? (l(), k(C(f), {
            key: 0,
            class: "text-c-btn p-0.5",
            icon: "Checkmark",
            size: "xs"
          })) : a("", !0)
        ], 12, R)), 64)),
        o[1] || (o[1] = n("hr", { class: "border-ghost h-5 w-0.5 border-l" }, null, -1)),
        n("button", {
          class: "z-10 flex h-4 w-4 cursor-pointer flex-row items-center justify-center gap-2 rounded-full",
          style: v(y.value),
          type: "button",
          onClick: g
        }, [
          x.value ? (l(), k(C(f), {
            key: 0,
            class: "text-c-btn",
            icon: "Checkmark",
            size: "xs"
          })) : a("", !0)
        ], 4)
      ])) : a("", !0),
      s.value ? (l(), i("div", L, [
        o[2] || (o[2] = n("span", { class: "absolute h-4 w-4 rounded-full border border-dashed" }, null, -1)),
        n("span", {
          class: "z-[1] h-4 w-4 rounded-full",
          style: v(y.value)
        }, null, 4),
        j(n("input", {
          ref_key: "customColorInputRef",
          ref: b,
          "onUpdate:modelValue": o[0] || (o[0] = (u) => t.value = u),
          class: "w-full flex-1 border-transparent text-sm outline-none",
          placeholder: r.activeColor || "#000000",
          type: "text",
          onInput: B
        }, null, 40, U), [
          [N, t.value]
        ]),
        n("button", {
          class: "text-c-3 hover:bg-b-2 rounded-lg p-1.5",
          type: "button",
          onClick: g
        }, [
          T(C(f), {
            icon: "Checkmark",
            size: "xs"
          })
        ])
      ])) : a("", !0)
    ]));
  }
});
export {
  P as default
};
