{
  "version": 3,
  "sources": ["../../src/helpers/prune-document.ts"],
  "sourcesContent": ["import type { OpenAPIV3_1 } from '@scalar/openapi-types'\n\n/**\n * Recursively removes all undefined values from an object or array.\n * Preserves null values as they are valid in JSON/OpenAPI.\n * Returns a new object/array with undefined values removed.\n */\nconst removeUndefinedValues = (value: unknown): unknown => {\n  if (value === null || value === undefined) {\n    return value === null ? null : undefined\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(removeUndefinedValues).filter((item) => item !== undefined)\n  }\n\n  if (typeof value === 'object') {\n    const cleaned: Record<string, unknown> = {}\n    for (const [key, val] of Object.entries(value)) {\n      const cleanedValue = removeUndefinedValues(val)\n      if (cleanedValue !== undefined) {\n        cleaned[key] = cleanedValue\n      }\n    }\n    return cleaned\n  }\n\n  return value\n}\n\n/**\n * Prunes an OpenAPI document by removing empty arrays/objects and undefined values.\n * Removes empty tags, security arrays, and empty components objects.\n * Recursively removes all undefined values throughout the document structure.\n */\nexport const pruneDocument = (document: OpenAPIV3_1.Document): OpenAPIV3_1.Document => {\n  const cleaned: OpenAPIV3_1.Document = { ...document }\n\n  if (cleaned.tags?.length === 0) {\n    delete cleaned.tags\n  }\n\n  if (cleaned.security?.length === 0) {\n    delete cleaned.security\n  }\n\n  if (cleaned.components && Object.keys(cleaned.components).length === 0) {\n    delete cleaned.components\n  }\n\n  if (cleaned.externalDocs === undefined) {\n    delete cleaned.externalDocs\n  }\n\n  // Recursively remove all undefined values from the document\n  return removeUndefinedValues(cleaned) as OpenAPIV3_1.Document\n}\n"],
  "mappings": "AAOA,MAAM,wBAAwB,CAAC,UAA4B;AACzD,MAAI,UAAU,QAAQ,UAAU,QAAW;AACzC,WAAO,UAAU,OAAO,OAAO;AAAA,EACjC;AAEA,MAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,WAAO,MAAM,IAAI,qBAAqB,EAAE,OAAO,CAAC,SAAS,SAAS,MAAS;AAAA,EAC7E;AAEA,MAAI,OAAO,UAAU,UAAU;AAC7B,UAAM,UAAmC,CAAC;AAC1C,eAAW,CAAC,KAAK,GAAG,KAAK,OAAO,QAAQ,KAAK,GAAG;AAC9C,YAAM,eAAe,sBAAsB,GAAG;AAC9C,UAAI,iBAAiB,QAAW;AAC9B,gBAAQ,GAAG,IAAI;AAAA,MACjB;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAOO,MAAM,gBAAgB,CAAC,aAAyD;AACrF,QAAM,UAAgC,EAAE,GAAG,SAAS;AAEpD,MAAI,QAAQ,MAAM,WAAW,GAAG;AAC9B,WAAO,QAAQ;AAAA,EACjB;AAEA,MAAI,QAAQ,UAAU,WAAW,GAAG;AAClC,WAAO,QAAQ;AAAA,EACjB;AAEA,MAAI,QAAQ,cAAc,OAAO,KAAK,QAAQ,UAAU,EAAE,WAAW,GAAG;AACtE,WAAO,QAAQ;AAAA,EACjB;AAEA,MAAI,QAAQ,iBAAiB,QAAW;AACtC,WAAO,QAAQ;AAAA,EACjB;AAGA,SAAO,sBAAsB,OAAO;AACtC;",
  "names": []
}
