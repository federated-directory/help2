{
  "version": 3,
  "sources": ["../../src/helpers/status-codes.ts"],
  "sourcesContent": ["import type { Item } from '@/types'\n\n/**\n * Extracts expected status codes from the test scripts of a Postman item.\n * Looks for patterns like:\n * - pm.response.to.have.status(201)\n * - pm.expect(pm.response.code).to.eql(202)\n * - pm.expect(pm.response.status).to.equal(201)\n */\nexport function extractStatusCodesFromTests(item: Item): number[] {\n  const statusCodes: number[] = []\n\n  if (item.event?.length) {\n    item.event.forEach((event) => {\n      if (event.listen === 'test' && event.script?.exec) {\n        const scriptLines = Array.isArray(event.script.exec) ? event.script.exec : [event.script.exec]\n\n        scriptLines.forEach((line: string) => {\n          const statusCode = parseStatusCodeFromLine(line)\n          if (statusCode) {\n            statusCodes.push(statusCode)\n          }\n        })\n      }\n    })\n  }\n\n  return statusCodes\n}\n\n/**\n * Parses a line of script to extract a status code.\n * Supports patterns like:\n * - pm.response.to.have.status(201)\n * - pm.expect(pm.response.code).to.eql(202)\n * - pm.expect(pm.response.status).to.equal(201)\n */\nfunction parseStatusCodeFromLine(line: string): number | null {\n  const patterns = [\n    /pm\\.response\\.to\\.have\\.status\\((\\d{3})\\)/,\n    /pm\\.expect\\(pm\\.response\\.code\\)\\.to\\.(?:eql|equal)\\((\\d{3})\\)/,\n    /pm\\.expect\\(pm\\.response\\.status\\)\\.to\\.(?:eql|equal)\\(['\"](\\d{3})['\"]\\)/,\n  ]\n\n  for (const pattern of patterns) {\n    const match = pattern.exec(line)?.at(1)\n    if (match) {\n      return Number.parseInt(match, 10)\n    }\n  }\n\n  return null\n}\n"],
  "mappings": "AASO,SAAS,4BAA4B,MAAsB;AAChE,QAAM,cAAwB,CAAC;AAE/B,MAAI,KAAK,OAAO,QAAQ;AACtB,SAAK,MAAM,QAAQ,CAAC,UAAU;AAC5B,UAAI,MAAM,WAAW,UAAU,MAAM,QAAQ,MAAM;AACjD,cAAM,cAAc,MAAM,QAAQ,MAAM,OAAO,IAAI,IAAI,MAAM,OAAO,OAAO,CAAC,MAAM,OAAO,IAAI;AAE7F,oBAAY,QAAQ,CAAC,SAAiB;AACpC,gBAAM,aAAa,wBAAwB,IAAI;AAC/C,cAAI,YAAY;AACd,wBAAY,KAAK,UAAU;AAAA,UAC7B;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACH;AAEA,SAAO;AACT;AASA,SAAS,wBAAwB,MAA6B;AAC5D,QAAM,WAAW;AAAA,IACf;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAEA,aAAW,WAAW,UAAU;AAC9B,UAAM,QAAQ,QAAQ,KAAK,IAAI,GAAG,GAAG,CAAC;AACtC,QAAI,OAAO;AACT,aAAO,OAAO,SAAS,OAAO,EAAE;AAAA,IAClC;AAAA,EACF;AAEA,SAAO;AACT;",
  "names": []
}
