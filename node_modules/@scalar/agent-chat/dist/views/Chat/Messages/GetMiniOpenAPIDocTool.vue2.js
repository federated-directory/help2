import { defineComponent as c, ref as d, watch as g, computed as f, createElementBlock as n, openBlock as o, Fragment as l, createCommentVNode as i, unref as p, createVNode as v, renderList as C, createBlock as P, withCtx as h, createTextVNode as x, toDisplayString as I } from "vue";
import k from "../../../components/ContextItem.vue.js";
import y from "../../../components/LoadingMiniOpenAPIDoc.vue.js";
import { getOperations as B } from "../../../helpers.js";
import { useState as O } from "../../../state/state.js";
const D = { key: 0 }, N = {
  key: 1,
  class: "operations"
}, L = /* @__PURE__ */ c({
  __name: "GetMiniOpenAPIDocTool",
  props: {
    messagePart: {},
    message: {}
  },
  setup(e) {
    const r = d(!1);
    g(
      () => e.message,
      () => {
        const a = e.message.parts, s = a.findIndex(
          (t) => "toolCallId" in t && t.toolCallId === e.messagePart.value.toolCallId
        );
        r.value = !!a[s + 1];
      }
    );
    const u = f(() => {
      if (!e.messagePart.value.output?.structuredContent)
        return;
      const a = e.messagePart.value.output?.structuredContent?.info?.title;
      return B(
        e.messagePart.value.output?.structuredContent
      ).map(
        (t) => `${a ? `${a} - ` : ""}${t.summary ?? ""}`
      ).filter(Boolean);
    }), m = O();
    return (a, s) => (o(), n(l, null, [
      e.messagePart.value.state === "input-available" && p(m).chat.status === "streaming" ? (o(), n("div", D, [
        v(y)
      ])) : i("", !0),
      u.value ? (o(), n("div", N, [
        (o(!0), n(l, null, C(u.value, (t) => (o(), P(k, {
          key: t,
          loading: !r.value
        }, {
          default: h(() => [
            x(I(t), 1)
          ]),
          _: 2
        }, 1032, ["loading"]))), 128))
      ])) : i("", !0)
    ], 64));
  }
});
export {
  L as default
};
