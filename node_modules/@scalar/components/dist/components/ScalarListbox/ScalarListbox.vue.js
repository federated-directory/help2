import { defineComponent as x, createBlock as n, openBlock as o, unref as t, withCtx as l, createCommentVNode as u, createVNode as i, createTextVNode as b, toDisplayString as V, mergeProps as d, renderSlot as y, createElementBlock as f, createElementVNode as B, Fragment as g, renderList as L } from "vue";
import { Listbox as h, ListboxLabel as k, ListboxButton as $, ListboxOptions as N } from "@headlessui/vue";
import { useBindCx as w } from "@scalar/use-hooks/useBindCx";
import C from "./ScalarListboxItem.vue.js";
import S from "../ScalarFloating/ScalarFloating.vue.js";
import v from "../ScalarFloating/ScalarFloatingBackdrop.vue.js";
const E = { class: "custom-scroll min-h-0 flex-1" }, P = /* @__PURE__ */ x({
  inheritAttrs: !1,
  __name: "ScalarListbox",
  props: {
    options: {},
    id: {},
    label: {},
    multiple: { type: Boolean },
    modelValue: {},
    placement: {},
    offset: { type: [Number, Object, Function] },
    resize: { type: Boolean },
    target: {},
    middleware: {},
    teleport: { type: [Boolean, String] }
  },
  emits: ["update:modelValue"],
  setup(e) {
    const { cx: c } = w();
    return (m, r) => (o(), n(t(h), {
      modelValue: e.modelValue,
      multiple: e.multiple,
      "onUpdate:modelValue": r[0] || (r[0] = (a) => m.$emit("update:modelValue", a))
    }, {
      default: l(({ open: a }) => [
        e.label ? (o(), n(t(k), {
          key: 0,
          class: "sr-only"
        }, {
          default: l(() => [
            b(V(e.label), 1)
          ]),
          _: 1
        })) : u("", !0),
        i(t(S), d(m.$props, {
          placement: e.placement ?? "bottom-start"
        }), {
          floating: l(({ width: p }) => [
            a ? (o(), f("div", d(
              {
                key: 0,
                style: { width: p }
              },
              t(c)(
                "relative flex max-h-[inherit] w-40 max-w-[inherit] rounded text-sm"
              )
            ), [
              B("div", E, [
                i(t(N), { class: "flex flex-col gap-0.75 p-0.75 -outline-offset-1" }, {
                  default: l(() => [
                    (o(!0), f(g, null, L(e.options, (s) => (o(), n(C, {
                      key: s.id,
                      multiselect: e.multiple,
                      option: s
                    }, null, 8, ["multiselect", "option"]))), 128))
                  ]),
                  _: 1
                })
              ]),
              i(t(v))
            ], 16)) : u("", !0)
          ]),
          default: l(() => [
            i(t($), {
              id: e.id,
              as: "template"
            }, {
              default: l(() => [
                y(m.$slots, "default", { open: a })
              ]),
              _: 2
            }, 1032, ["id"])
          ]),
          _: 2
        }, 1040, ["placement"])
      ]),
      _: 3
    }, 8, ["modelValue", "multiple"]));
  }
});
export {
  P as default
};
