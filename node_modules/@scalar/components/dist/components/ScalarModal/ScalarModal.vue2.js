import { defineComponent as y, createBlock as r, openBlock as l, unref as a, withCtx as s, createElementVNode as b, normalizeClass as o, createVNode as d, createElementBlock as i, createCommentVNode as n, normalizeStyle as g, createTextVNode as z, toDisplayString as k, renderSlot as c, reactive as p } from "vue";
import { Dialog as C, DialogPanel as S, DialogTitle as D } from "@headlessui/vue";
import { ScalarIconX as N } from "@scalar/icons";
import { cva as x, cx as f } from "@scalar/use-hooks/useBindCx";
import V from "../ScalarIconButton/ScalarIconButton.vue.js";
const $ = {
  key: 0,
  class: "close-button z-10 fixed right-2 top-2"
};
function I() {
  return p({
    open: !1,
    show() {
      this.open = !0;
    },
    hide() {
      this.open = !1;
    }
  });
}
const P = /* @__PURE__ */ y({
  __name: "ScalarModal",
  props: {
    state: {},
    title: {},
    bodyClass: {},
    maxWidth: {},
    size: { default: "md" },
    variant: {}
  },
  emits: ["close"],
  setup(e, { emit: v }) {
    const u = v, h = x({
      base: [
        "scalar-modal",
        "flex flex-col relative mb-0 rounded-lg bg-b-1 p-0 text-left leading-snug text-c-1 opacity-0 w-[calc(100vw-12px)] md:w-[calc(100vw-16px)] lg:w-[calc(100vw-32px)]"
      ].join(" "),
      variants: {
        size: {
          xxs: "mt-[20svh] max-h-[60svh] max-w-[360px]",
          xs: "mt-[20svh] max-h-[60svh] max-w-[480px]",
          sm: "mt-[20svh] max-h-[60svh] max-w-[540px]",
          md: "mt-[20svh] max-h-[60svh] max-w-[640px]",
          lg: "m-auto max-h-[80svh] max-w-[800px]",
          xl: "m-auto max-h-[90svh] max-w-[1000px]",
          full: "full-size-styles max-h-dvh mt-0 lg:w-full"
        },
        variant: {
          form: "scalar-modal-form",
          search: "scalar-modal-search mt-[15svh] max-h-[60svh] max-w-[540px]",
          error: "scalar-modal-error"
        }
      }
    }), w = x({
      base: ["scalar-modal-body", "relative flex-1 min-h-0 p-3"].join(" "),
      variants: {
        variant: {
          form: "overflow-visible",
          search: "flex flex-col !m-0 overflow-hidden p-0",
          error: "overflow-y-scroll"
        },
        size: {
          xxs: "",
          xs: "",
          sm: "",
          md: "",
          lg: "",
          xl: "m-0 p-0",
          full: " rounded-none"
        }
      }
    });
    return (m, t) => (l(), r(a(C), {
      open: e.state.open,
      onClose: t[1] || (t[1] = () => {
        e.state.hide(), u("close");
      })
    }, {
      default: s(() => [
        b("div", {
          class: o(
            a(f)(
              e.size === "full" ? "scalar-modal-layout-full" : "scalar-modal-layout",
              "fixed left-0 top-0 flex items-start justify-center",
              "z-overlay h-dvh w-dvw",
              "bg-backdrop opacity-0 dark:bg-backdrop-dark",
              e.size === "full" && "flex"
            )
          )
        }, [
          d(a(S), {
            class: o(a(h)({ size: e.size, variant: e.variant })),
            style: g({ maxWidth: e.maxWidth })
          }, {
            default: s(() => [
              e.title ? (l(), r(a(D), {
                key: 0,
                class: "scalar-modal-header m-0 -mb-1 rounded-lg pt-3 px-3 text-left text-sm font-medium text-c-1"
              }, {
                default: s(() => [
                  z(k(e.title), 1)
                ]),
                _: 1
              })) : n("", !0),
              e.size === "full" ? (l(), i("div", {
                key: 1,
                class: o(e.bodyClass)
              }, [
                c(m.$slots, "default", {}, void 0, !0)
              ], 2)) : (l(), i("div", {
                key: 2,
                class: o(a(f)(a(w)({ size: e.size, variant: e.variant }), e.bodyClass))
              }, [
                c(m.$slots, "default", {}, void 0, !0)
              ], 2))
            ]),
            _: 3
          }, 8, ["class", "style"]),
          e.size === "full" ? (l(), i("div", $, [
            d(a(V), {
              class: "hover:bg-b-3 focus:outline-none",
              icon: a(N),
              label: "Close modal",
              onClick: t[0] || (t[0] = (j) => e.state.hide())
            }, null, 8, ["icon"])
          ])) : n("", !0)
        ], 2)
      ]),
      _: 3
    }, 8, ["open"]));
  }
});
export {
  P as default,
  I as useModal
};
