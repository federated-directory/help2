{
  "version": 3,
  "sources": ["../../src/utils/convertWithHttpSnippetLite.ts"],
  "sourcesContent": ["import type { HarRequest } from '@scalar/types/snippetz'\n\nimport type { SnippetRequest } from '@/httpsnippet-lite/helpers/snippet-request'\n\n/**\n * Takes a httpsnippet-lite client and converts the given request to a code example with it.\n *\n * @deprecated This a temporary wrapper around httpsnippet-lite. Let's write all the generators ourselves instead.\n */\nexport function convertWithHttpSnippetLite(\n  // Couldn't find the proper type, there was always a mismatch.\n  client: Record<string, unknown>,\n  request?: Partial<HarRequest>,\n): string {\n  const urlObject = new URL(request?.url ?? '')\n\n  // If it's just the domain, omit the trailing slash\n  const url = urlObject.pathname === '/' ? urlObject.origin : urlObject.toString()\n\n  const harRequest: HarRequest = {\n    method: request?.method ?? 'GET',\n    url,\n    httpVersion: 'HTTP/1.1',\n    cookies: [], // Cookies are handled through headers\n    headers: request?.headers ?? [],\n    headersSize: -1,\n    bodySize: -1,\n    queryString: Array.from(urlObject.searchParams.entries()).map(([name, value]) => ({\n      name,\n      value,\n    })),\n    postData: request?.postData,\n  }\n\n  const allHeaders = (harRequest?.headers ?? []).reduce(\n    (acc, header) => ({\n      ...acc,\n      [header.name]: header.value,\n    }),\n    {} as Record<string, string>,\n  )\n\n  const queryObj = (harRequest.queryString ?? []).reduce(\n    (acc, param) => ({\n      ...acc,\n      [param.name]: param.value,\n    }),\n    {} as Record<string, string>,\n  )\n\n  const cookiesObj = (harRequest.cookies ?? []).reduce(\n    (acc, cookie) => ({\n      ...acc,\n      [cookie.name]: cookie.value,\n    }),\n    {} as Record<string, string>,\n  )\n\n  const parsedUrl = new URL(harRequest.url)\n  const uriObj = {\n    protocol: parsedUrl.protocol,\n    hostname: parsedUrl.hostname,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    pathname:\n      parsedUrl.pathname\n        .split('/')\n        .map((segment) => encodeURIComponent(decodeURIComponent(segment)))\n        .join('/') + parsedUrl.search,\n    path:\n      parsedUrl.pathname\n        .split('/')\n        .map((segment) => encodeURIComponent(decodeURIComponent(segment)))\n        .join('/') + parsedUrl.search,\n    search: parsedUrl.search,\n    hash: parsedUrl.hash,\n    href: parsedUrl.href,\n    origin: parsedUrl.origin,\n    password: parsedUrl.password,\n    searchParams: parsedUrl.searchParams,\n    username: parsedUrl.username,\n    toString: parsedUrl.toString,\n    toJSON: () => parsedUrl.toJSON(),\n  }\n\n  const convertRequest = {\n    url: harRequest.url,\n    uriObj,\n    method: harRequest.method?.toLocaleUpperCase() ?? 'GET',\n    httpVersion: harRequest.httpVersion,\n    cookies: harRequest.cookies ?? [],\n    headers: harRequest.headers ?? [],\n    headersSize: harRequest.headersSize ?? 0,\n    headersObj: allHeaders ?? {},\n    bodySize: harRequest.bodySize ?? 0,\n    queryString: harRequest.queryString ?? [],\n    postData: harRequest.postData\n      ? {\n          mimeType: harRequest.postData.mimeType ?? 'application/json',\n          text: harRequest.postData.text ?? '',\n          params: harRequest.postData.params ?? [],\n          paramsObj:\n            harRequest.postData.params?.reduce(\n              (acc, param) => {\n                if (param.name && param.value !== undefined) {\n                  acc[param.name] = param.value\n                }\n                return acc\n              },\n              {} as Record<string, string>,\n            ) ?? {},\n        }\n      : undefined,\n    allHeaders: allHeaders ?? {},\n    fullUrl: harRequest.url,\n    queryObj: queryObj ?? {},\n    cookiesObj: cookiesObj ?? {},\n  } as SnippetRequest\n\n  // If the request is a JSON request, parse the text as JSON\n  if (convertRequest.postData?.mimeType === 'application/json' && convertRequest.postData!.text) {\n    try {\n      convertRequest.postData.jsonObj = JSON.parse(convertRequest.postData.text)\n    } catch (error) {\n      console.error('Error parsing JSON:', error)\n    }\n  }\n\n  if (typeof client.convert === 'function') {\n    return client.convert(convertRequest)\n  }\n\n  return ''\n}\n"],
  "mappings": "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",
  "names": []
}
