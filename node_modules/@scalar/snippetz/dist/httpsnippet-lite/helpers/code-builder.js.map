{
  "version": 3,
  "sources": ["../../../src/httpsnippet-lite/helpers/code-builder.ts"],
  "sourcesContent": ["type PostProcessor = (unreplacedCode: string) => string\n\nexport type CodeBuilderOptions = {\n  /**\n   * Desired indentation character for aggregated lines of code\n   * @default ''\n   */\n  indent?: string\n  /**\n   * Desired character to join each line of code\n   * @default \\n\n   */\n  join?: string\n}\n\nconst DEFAULT_INDENTATION_CHARACTER = ''\nconst DEFAULT_LINE_JOIN = '\\n'\n\nexport class CodeBuilder {\n  postProcessors: PostProcessor[]\n  code: string[]\n  indentationCharacter: string\n  lineJoin: string\n\n  /**\n   * Add given indentation level to given line of code\n   */\n  indentLine: (line: string, indentationLevel?: number) => string\n  /**\n   * Add the line at the beginning of the current lines\n   */\n  unshift: (line: string, indentationLevel?: number) => void\n  /**\n   * Add the line at the end of the current lines\n   */\n  push: (line: string, indentationLevel?: number) => void\n  /**\n   * Add an empty line at the end of current lines\n   */\n  blank: () => void\n  /**\n   * Concatenate all current lines using the given lineJoin, then apply any replacers that may have been added\n   */\n  join: () => string\n  /**\n   * Often when writing modules you may wish to add a literal tag or bit of metadata that you wish to transform after other processing as a final step.\n   * To do so, you can provide a PostProcessor function and it will be run automatically for you when you call `join()` later on.\n   */\n  addPostProcessor: (postProcessor: PostProcessor) => void\n\n  /**\n   * Helper object to format and aggragate lines of code.\n   * Lines are aggregated in a `code` array, and need to be joined to obtain a proper code snippet.\n   */\n  constructor({ indent, join }: CodeBuilderOptions = {}) {\n    this.postProcessors = []\n    this.code = []\n    this.indentationCharacter = DEFAULT_INDENTATION_CHARACTER\n    this.lineJoin = DEFAULT_LINE_JOIN\n\n    /**\n     * Add given indentation level to given line of code\n     */\n    this.indentLine = (line, indentationLevel = 0) => {\n      const whitespace = this.indentationCharacter.repeat(indentationLevel)\n      return `${whitespace}${line}`\n    }\n    /**\n     * Add the line at the beginning of the current lines\n     */\n    this.unshift = (line, indentationLevel) => {\n      const newLine = this.indentLine(line, indentationLevel)\n      this.code.unshift(newLine)\n    }\n    /**\n     * Add the line at the end of the current lines\n     */\n    this.push = (line, indentationLevel) => {\n      const newLine = this.indentLine(line, indentationLevel)\n      this.code.push(newLine)\n    }\n    /**\n     * Add an empty line at the end of current lines\n     */\n    this.blank = () => {\n      this.code.push('')\n    }\n    /**\n     * Concatenate all current lines using the given lineJoin, then apply any replacers that may have been added\n     */\n    this.join = () => {\n      const unreplacedCode = this.code.join(this.lineJoin)\n      const replacedOutput = this.postProcessors.reduce(\n        (accumulator, replacer) => replacer(accumulator),\n        unreplacedCode,\n      )\n      return replacedOutput\n    }\n    /**\n     * Often when writing modules you may wish to add a literal tag or bit of metadata that you wish to transform after other processing as a final step.\n     * To do so, you can provide a PostProcessor function and it will be run automatically for you when you call `join()` later on.\n     */\n    this.addPostProcessor = (postProcessor) => {\n      this.postProcessors = [...this.postProcessors, postProcessor]\n    }\n    this.indentationCharacter = indent || DEFAULT_INDENTATION_CHARACTER\n    this.lineJoin = join !== null && join !== void 0 ? join : DEFAULT_LINE_JOIN\n  }\n}\n"],
  "mappings": "AAeA,MAAM,gCAAgC;AACtC,MAAM,oBAAoB;AAEnB,MAAM,YAAY;AAAA,EACvB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA;AAAA;AAAA;AAAA,EAKA;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA;AAAA;AAAA;AAAA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,EAAE,QAAQ,KAAK,IAAwB,CAAC,GAAG;AACrD,SAAK,iBAAiB,CAAC;AACvB,SAAK,OAAO,CAAC;AACb,SAAK,uBAAuB;AAC5B,SAAK,WAAW;AAKhB,SAAK,aAAa,CAAC,MAAM,mBAAmB,MAAM;AAChD,YAAM,aAAa,KAAK,qBAAqB,OAAO,gBAAgB;AACpE,aAAO,GAAG,UAAU,GAAG,IAAI;AAAA,IAC7B;AAIA,SAAK,UAAU,CAAC,MAAM,qBAAqB;AACzC,YAAM,UAAU,KAAK,WAAW,MAAM,gBAAgB;AACtD,WAAK,KAAK,QAAQ,OAAO;AAAA,IAC3B;AAIA,SAAK,OAAO,CAAC,MAAM,qBAAqB;AACtC,YAAM,UAAU,KAAK,WAAW,MAAM,gBAAgB;AACtD,WAAK,KAAK,KAAK,OAAO;AAAA,IACxB;AAIA,SAAK,QAAQ,MAAM;AACjB,WAAK,KAAK,KAAK,EAAE;AAAA,IACnB;AAIA,SAAK,OAAO,MAAM;AAChB,YAAM,iBAAiB,KAAK,KAAK,KAAK,KAAK,QAAQ;AACnD,YAAM,iBAAiB,KAAK,eAAe;AAAA,QACzC,CAAC,aAAa,aAAa,SAAS,WAAW;AAAA,QAC/C;AAAA,MACF;AACA,aAAO;AAAA,IACT;AAKA,SAAK,mBAAmB,CAAC,kBAAkB;AACzC,WAAK,iBAAiB,CAAC,GAAG,KAAK,gBAAgB,aAAa;AAAA,IAC9D;AACA,SAAK,uBAAuB,UAAU;AACtC,SAAK,WAAW,SAAS,QAAQ,SAAS,SAAS,OAAO;AAAA,EAC5D;AACF;",
  "names": []
}
