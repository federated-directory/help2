{
  "version": 3,
  "sources": ["../../../../../src/httpsnippet-lite/targets/shell/httpie/client.ts"],
  "sourcesContent": ["/**\n * @description\n * HTTP code snippet generator for the Shell using HTTPie.\n *\n * @author\n * @AhmadNassri\n *\n * for any questions or issues regarding the generated code snippet, please open an issue mentioning the author.\n */\n\nimport { CodeBuilder } from '@/httpsnippet-lite/helpers/code-builder'\nimport { shellQuote } from '@/httpsnippet-lite/helpers/shell'\nimport type { Client } from '@/httpsnippet-lite/targets/target'\n\nexport const httpie: Client = {\n  info: {\n    key: 'httpie',\n    title: 'HTTPie',\n    link: 'http://httpie.org/',\n    description: 'a CLI, cURL-like tool for humans',\n  },\n  convert: ({ allHeaders, postData, queryObj, fullUrl, method, url }, options) => {\n    const opts = {\n      body: false,\n      cert: false,\n      headers: false,\n      indent: '  ',\n      pretty: false,\n      print: false,\n      queryParams: false,\n      short: false,\n      style: false,\n      timeout: false,\n      verbose: false,\n      verify: false,\n      ...options,\n    }\n    const { push, join, unshift } = new CodeBuilder({\n      indent: opts.indent,\n      // @ts-expect-error SEEMS LEGIT\n      join: opts.indent !== false ? ` \\\\\\n${opts.indent}` : ' ',\n    })\n    let raw = false\n    const flags = []\n    if (opts.headers) {\n      flags.push(opts.short ? '-h' : '--headers')\n    }\n    if (opts.body) {\n      flags.push(opts.short ? '-b' : '--body')\n    }\n    if (opts.verbose) {\n      flags.push(opts.short ? '-v' : '--verbose')\n    }\n    if (opts.print) {\n      flags.push(`${opts.short ? '-p' : '--print'}=${opts.print}`)\n    }\n    if (opts.verify) {\n      flags.push(`--verify=${opts.verify}`)\n    }\n    if (opts.cert) {\n      flags.push(`--cert=${opts.cert}`)\n    }\n    if (opts.pretty) {\n      flags.push(`--pretty=${opts.pretty}`)\n    }\n    if (opts.style) {\n      flags.push(`--style=${opts.style}`)\n    }\n    if (opts.timeout) {\n      flags.push(`--timeout=${opts.timeout}`)\n    }\n    // construct query params\n    if (opts.queryParams) {\n      Object.keys(queryObj).forEach((name) => {\n        const value = queryObj[name]\n        if (Array.isArray(value)) {\n          value.forEach((val) => {\n            push(`${name}==${shellQuote(val)}`)\n          })\n        } else {\n          push(`${name}==${shellQuote(value)}`)\n        }\n      })\n    }\n    // construct headers\n    Object.keys(allHeaders)\n      .sort()\n      .forEach((key) => {\n        push(`${key}:${shellQuote(allHeaders[key] as string)}`)\n      })\n    if (\n      (postData === null || postData === void 0 ? void 0 : postData.mimeType) === 'application/x-www-form-urlencoded'\n    ) {\n      // construct post params\n      if (postData!.params?.length) {\n        flags.push(opts.short ? '-f' : '--form')\n        postData!.params.forEach((param) => {\n          push(`${param.name}=${shellQuote(param.value)}`)\n        })\n      }\n    } else if ((postData === null || postData === void 0 ? void 0 : postData.mimeType) === 'multipart/form-data') {\n      // construct multipart form data\n      if (postData?.params?.length) {\n        flags.push('--multipart')\n        postData.params.forEach((param) => {\n          if (param.fileName) {\n            push(`${param.name}@${shellQuote(param.fileName)}`)\n          } else {\n            push(`${param.name}='${shellQuote(param.value)}'`)\n          }\n        })\n      }\n    } else {\n      raw = true\n    }\n    const cliFlags = flags.length ? `${flags.join(' ')} ` : ''\n    url = shellQuote(opts.queryParams ? url : fullUrl)\n    unshift(`http ${cliFlags}${method} ${url}`)\n    if (raw && (postData === null || postData === void 0 ? void 0 : postData.text)) {\n      const postDataText = shellQuote(postData!.text)\n      unshift(`echo ${postDataText} | `)\n    }\n    return join()\n  },\n}\n"],
  "mappings": "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",
  "names": []
}
