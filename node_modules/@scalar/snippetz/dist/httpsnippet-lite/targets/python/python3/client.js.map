{
  "version": 3,
  "sources": ["../../../../../src/httpsnippet-lite/targets/python/python3/client.ts"],
  "sourcesContent": ["/**\n * @description\n * HTTP code snippet generator for native Python3.\n *\n * @author\n * @montanaflynn\n *\n * for any questions or issues regarding the generated code snippet, please open an issue mentioning the author.\n */\n\nimport { CodeBuilder } from '@/httpsnippet-lite/helpers/code-builder'\nimport { escapeForDoubleQuotes } from '@/httpsnippet-lite/helpers/escape'\nimport type { Client } from '@/httpsnippet-lite/targets/target'\n\nexport const python3: Client = {\n  info: {\n    key: 'python3',\n    title: 'http.client',\n    link: 'https://docs.python.org/3/library/http.client.html',\n    description: 'Python3 HTTP Client',\n  },\n  convert: ({ uriObj: { path, protocol, host }, postData, allHeaders, method }, options = {}) => {\n    const { insecureSkipVerify = false } = options\n    const { push, blank, join } = new CodeBuilder()\n    // Start Request\n    push('import http.client')\n    if (insecureSkipVerify) {\n      push('import ssl')\n    }\n    blank()\n    // Check which protocol to be used for the client connection\n    if (protocol === 'https:') {\n      const sslContext = insecureSkipVerify ? ', context = ssl._create_unverified_context()' : ''\n      push(`conn = http.client.HTTPSConnection(\"${host}\"${sslContext})`)\n      blank()\n    } else {\n      push(`conn = http.client.HTTPConnection(\"${host}\")`)\n      blank()\n    }\n    // Create payload string if it exists\n    const payload = JSON.stringify(postData === null || postData === void 0 ? void 0 : postData.text)\n    if (payload) {\n      push(`payload = ${payload}`)\n      blank()\n    }\n    // Create Headers\n    const headers = allHeaders\n    const headerCount = Object.keys(headers).length\n    if (headerCount === 1) {\n      for (const header in headers) {\n        push(`headers = { '${header}': \"${escapeForDoubleQuotes(headers[header] as string)}\" }`)\n        blank()\n      }\n    } else if (headerCount > 1) {\n      let count = 1\n      push('headers = {')\n      for (const header in headers) {\n        if (count++ !== headerCount) {\n          push(`    '${header}': \"${escapeForDoubleQuotes(headers[header] as string)}\",`)\n        } else {\n          push(`    '${header}': \"${escapeForDoubleQuotes(headers[header] as string)}\"`)\n        }\n      }\n      push('}')\n      blank()\n    }\n    // Make Request\n    if (payload && headerCount) {\n      push(`conn.request(\"${method}\", \"${path}\", payload, headers)`)\n    } else if (payload && !headerCount) {\n      push(`conn.request(\"${method}\", \"${path}\", payload)`)\n    } else if (!payload && headerCount) {\n      push(`conn.request(\"${method}\", \"${path}\", headers=headers)`)\n    } else {\n      push(`conn.request(\"${method}\", \"${path}\")`)\n    }\n    // Get Response\n    blank()\n    push('res = conn.getresponse()')\n    push('data = res.read()')\n    blank()\n    push('print(data.decode(\"utf-8\"))')\n    return join()\n  },\n}\n"],
  "mappings": "AAUA,SAAS,mBAAmB;AAC5B,SAAS,6BAA6B;AAG/B,MAAM,UAAkB;AAAA,EAC7B,MAAM;AAAA,IACJ,KAAK;AAAA,IACL,OAAO;AAAA,IACP,MAAM;AAAA,IACN,aAAa;AAAA,EACf;AAAA,EACA,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,UAAU,KAAK,GAAG,UAAU,YAAY,OAAO,GAAG,UAAU,CAAC,MAAM;AAC7F,UAAM,EAAE,qBAAqB,MAAM,IAAI;AACvC,UAAM,EAAE,MAAM,OAAO,KAAK,IAAI,IAAI,YAAY;AAE9C,SAAK,oBAAoB;AACzB,QAAI,oBAAoB;AACtB,WAAK,YAAY;AAAA,IACnB;AACA,UAAM;AAEN,QAAI,aAAa,UAAU;AACzB,YAAM,aAAa,qBAAqB,iDAAiD;AACzF,WAAK,uCAAuC,IAAI,IAAI,UAAU,GAAG;AACjE,YAAM;AAAA,IACR,OAAO;AACL,WAAK,sCAAsC,IAAI,IAAI;AACnD,YAAM;AAAA,IACR;AAEA,UAAM,UAAU,KAAK,UAAU,aAAa,QAAQ,aAAa,SAAS,SAAS,SAAS,IAAI;AAChG,QAAI,SAAS;AACX,WAAK,aAAa,OAAO,EAAE;AAC3B,YAAM;AAAA,IACR;AAEA,UAAM,UAAU;AAChB,UAAM,cAAc,OAAO,KAAK,OAAO,EAAE;AACzC,QAAI,gBAAgB,GAAG;AACrB,iBAAW,UAAU,SAAS;AAC5B,aAAK,gBAAgB,MAAM,OAAO,sBAAsB,QAAQ,MAAM,CAAW,CAAC,KAAK;AACvF,cAAM;AAAA,MACR;AAAA,IACF,WAAW,cAAc,GAAG;AAC1B,UAAI,QAAQ;AACZ,WAAK,aAAa;AAClB,iBAAW,UAAU,SAAS;AAC5B,YAAI,YAAY,aAAa;AAC3B,eAAK,QAAQ,MAAM,OAAO,sBAAsB,QAAQ,MAAM,CAAW,CAAC,IAAI;AAAA,QAChF,OAAO;AACL,eAAK,QAAQ,MAAM,OAAO,sBAAsB,QAAQ,MAAM,CAAW,CAAC,GAAG;AAAA,QAC/E;AAAA,MACF;AACA,WAAK,GAAG;AACR,YAAM;AAAA,IACR;AAEA,QAAI,WAAW,aAAa;AAC1B,WAAK,iBAAiB,MAAM,OAAO,IAAI,sBAAsB;AAAA,IAC/D,WAAW,WAAW,CAAC,aAAa;AAClC,WAAK,iBAAiB,MAAM,OAAO,IAAI,aAAa;AAAA,IACtD,WAAW,CAAC,WAAW,aAAa;AAClC,WAAK,iBAAiB,MAAM,OAAO,IAAI,qBAAqB;AAAA,IAC9D,OAAO;AACL,WAAK,iBAAiB,MAAM,OAAO,IAAI,IAAI;AAAA,IAC7C;AAEA,UAAM;AACN,SAAK,0BAA0B;AAC/B,SAAK,mBAAmB;AACxB,UAAM;AACN,SAAK,6BAA6B;AAClC,WAAO,KAAK;AAAA,EACd;AACF;",
  "names": []
}
