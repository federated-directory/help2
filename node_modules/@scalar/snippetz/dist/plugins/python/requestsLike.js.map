{
  "version": 3,
  "sources": ["../../../src/plugins/python/requestsLike.ts"],
  "sourcesContent": ["import type { HarRequest, PluginConfiguration } from '@scalar/types/snippetz'\n\nconst LENGTH_CONSIDERED_AS_SHORT = 40\n\n// Function to convert JavaScript boolean and null values to Python equivalents\nfunction convertToPythonSyntax(str: string): string {\n  const replacements = [\n    ['true', 'True'],\n    ['false', 'False'],\n    ['null', 'None'],\n  ]\n\n  let result = str\n  for (const [jsonVal, pythonVal] of replacements) {\n    const patterns = [`(: )${jsonVal}(?=,|\\\\n)`, `^( +)${jsonVal}(?=,|\\\\n)`]\n\n    for (const pattern of patterns) {\n      result = result.replace(new RegExp(pattern, 'gm'), `$1${pythonVal}`)\n    }\n  }\n\n  return result\n}\n\nexport function requestsLikeGenerate(\n  clientVar: string,\n  request?: Partial<HarRequest>,\n  configuration?: PluginConfiguration,\n) {\n  // Normalize request with defaults\n  const normalizedRequest = {\n    url: 'https://example.com',\n    method: 'get',\n    ...request,\n  }\n\n  // Normalize method to lowercase for requests library\n  const method = normalizedRequest.method.toLowerCase()\n\n  // Build options object\n  const options: Record<string, any> = {}\n\n  // Add headers if present\n  if (normalizedRequest.headers?.length) {\n    options.headers = normalizedRequest.headers.reduce(\n      (acc, header) => {\n        if (!(header.name in acc)) {\n          acc[header.name] = header.value\n        }\n        return acc\n      },\n      {} as Record<string, string>,\n    )\n  }\n\n  // Add query parameters if present\n  if (normalizedRequest.queryString?.length) {\n    options.params = Object.fromEntries(normalizedRequest.queryString.map((q) => [q.name, q.value]))\n  }\n\n  // Add cookies if present\n  if (normalizedRequest.cookies?.length) {\n    options.cookies = Object.fromEntries(normalizedRequest.cookies.map((c) => [c.name, c.value]))\n  }\n\n  // Add auth if present\n  if (configuration?.auth?.username && configuration?.auth?.password) {\n    options.auth = [configuration.auth.username, configuration.auth.password]\n  }\n\n  // Handle request body\n  if (normalizedRequest.postData) {\n    const { mimeType, text, params } = normalizedRequest.postData\n\n    if (mimeType === 'application/json' && text) {\n      try {\n        options.json = JSON.parse(text)\n      } catch {\n        options.data = text\n      }\n    } else if (mimeType === 'application/octet-stream' && text) {\n      options.data = text // Store raw text, we'll handle the b\"...\" formatting later\n    } else if (mimeType === 'multipart/form-data' && params) {\n      const files: { key: string; file: string }[] = []\n      const formData: Record<string, string> = {}\n\n      params.forEach((param) => {\n        if (param.fileName !== undefined) {\n          files.push({ key: param.name, file: `open(\"${param.fileName}\", \"rb\")` })\n        } else if (param.value !== undefined) {\n          formData[param.name] = param.value\n        }\n      })\n\n      if (Object.keys(files).length) {\n        options.files = files\n      }\n      if (Object.keys(formData).length) {\n        options.data = formData\n      }\n    } else if (mimeType === 'application/x-www-form-urlencoded' && params) {\n      options.data = Object.fromEntries(params.map((p) => [p.name, p.value]))\n    }\n  }\n\n  // Format all parameters\n  const formattedParams: string[] = []\n\n  // Format URL based on length\n  const urlParam = `\"${normalizedRequest.url}\"`\n  if (normalizedRequest.url.length > LENGTH_CONSIDERED_AS_SHORT) {\n    formattedParams.push(urlParam)\n  } else {\n    // Will be handled in the return statement for short URLs\n    formattedParams.push('')\n  }\n\n  // Format options\n  for (const [key, value] of Object.entries(options)) {\n    if (key === 'auth') {\n      formattedParams.push(\n        `${key}=(${convertToPythonSyntax(JSON.stringify(value[0]))}, ${convertToPythonSyntax(JSON.stringify(value[1]))})`,\n      )\n    } else if (key === 'files') {\n      const filesTuples = value.map(({ key, file }: { key: string; file: string }) => `      (\"${key}\", ${file})`)\n      const filesStr = '[\\n' + filesTuples.join(',\\n') + '\\n    ]'\n      formattedParams.push(`${key}=${filesStr}`)\n    } else if (key === 'json') {\n      const jsonString = convertToPythonSyntax(\n        JSON.stringify(value, null, 2)\n          .split('\\n')\n          .map((line, i) => (i === 0 ? line : '    ' + line))\n          .join('\\n'),\n      )\n      formattedParams.push(`${key}=${jsonString}`)\n    } else if (key === 'data' && normalizedRequest.postData?.mimeType === 'application/octet-stream') {\n      // Special handling for binary data\n      formattedParams.push(`${key}=b\"${value}\"`)\n    } else {\n      const str = convertToPythonSyntax(\n        JSON.stringify(value, null, 2)\n          .split('\\n')\n          .map((line, i) => (i === 0 ? line : '    ' + line))\n          .join('\\n'),\n      )\n      formattedParams.push(`${key}=${str}`)\n    }\n  }\n\n  // Build the final request string with conditional URL formatting\n  if (normalizedRequest.url.length > LENGTH_CONSIDERED_AS_SHORT) {\n    return `${clientVar}.${method}(\\n    ${formattedParams.join(',\\n    ')}\\n)`\n  }\n\n  // For short URLs with no additional parameters, return a single-line format\n  if (formattedParams.length <= 1) {\n    return `${clientVar}.${method}(${urlParam})`\n  }\n\n  // For short URLs with parameters, maintain the multi-line format\n  return `${clientVar}.${method}(${urlParam}${formattedParams.length > 1 ? ',' : ''}\\n    ${formattedParams.slice(1).join(',\\n    ')}\\n)`\n}\n"],
  "mappings": "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",
  "names": ["key"]
}
