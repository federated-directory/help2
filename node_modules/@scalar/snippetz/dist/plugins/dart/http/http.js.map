{
  "version": 3,
  "sources": ["../../../../src/plugins/dart/http/http.ts"],
  "sourcesContent": ["import type { Plugin } from '@scalar/types/snippetz'\n\n/**\n * dart/http\n */\nexport const dartHttp: Plugin = {\n  target: 'dart',\n  client: 'http',\n  title: 'Http',\n  generate(request, options?: { auth?: { username: string; password: string } }) {\n    // Defaults\n    const normalizedRequest = {\n      method: 'GET',\n      ...request,\n    }\n\n    // Normalize method to uppercase\n    normalizedRequest.method = normalizedRequest.method.toUpperCase()\n\n    // Start building the Dart code\n    let code = `import 'package:http/http.dart' as http;\\n\\nvoid main() async {\\n`\n\n    // Handle cookies\n    let cookieHeader = ''\n    let cookieString = ''\n    if (normalizedRequest.cookies && normalizedRequest.cookies.length > 0) {\n      cookieString = normalizedRequest.cookies\n        .map((cookie) => `${encodeURIComponent(cookie.name)}=${encodeURIComponent(cookie.value)}`)\n        .join('; ')\n      cookieHeader = `  \"Cookie\": \"${cookieString}\",\\n`\n    }\n\n    // Handle headers\n    const headers =\n      normalizedRequest.headers?.reduce(\n        (acc, header) => {\n          if (header.value && !/[; ]/.test(header.name)) {\n            acc[header.name] = header.value\n          }\n          return acc\n        },\n        {} as Record<string, string>,\n      ) || {}\n\n    // Add Authorization header if credentials are provided\n    if (options?.auth) {\n      const { username, password } = options.auth\n\n      if (username && password) {\n        const credentials = `${username}:${password}`\n        headers['Authorization'] = `'Basic ' + base64Encode(utf8.encode('${credentials}'))`\n      }\n    }\n\n    if (cookieHeader) {\n      headers['Cookie'] = cookieString\n    }\n\n    if (Object.keys(headers).length > 0) {\n      code += '  final headers = <String,String>{\\n'\n      for (const [key, value] of Object.entries(headers)) {\n        if (value.includes('utf8.encode')) {\n          code += `    '${key}': ${value},\\n`\n        } else {\n          code += `    '${key}': '${value}',\\n`\n        }\n      }\n      code += '  };\\n\\n'\n    }\n\n    // Handle query string\n    const queryString = normalizedRequest.queryString?.length\n      ? '?' +\n        normalizedRequest.queryString\n          .map((param) => `${encodeURIComponent(param.name)}=${encodeURIComponent(param.value)}`)\n          .join('&')\n      : ''\n    const url = `${normalizedRequest.url}${queryString}`\n\n    // Handle body\n    let body = ''\n    if (normalizedRequest.postData) {\n      if (normalizedRequest.postData.mimeType === 'application/json') {\n        body = `  final body = r'${normalizedRequest.postData.text}';\\n\\n`\n      } else if (normalizedRequest.postData.mimeType === 'application/x-www-form-urlencoded') {\n        body = `  final body = '${normalizedRequest.postData.params?.map((param) => `${encodeURIComponent(param.name)}=${encodeURIComponent(param.value ?? '')}`).join('&') || ''}';\\n\\n`\n      } else if (normalizedRequest.postData.mimeType === 'multipart/form-data') {\n        body = '  final body = <String,String>{\\n'\n        for (const param of normalizedRequest.postData.params || []) {\n          const value = param.value || ''\n          const fileName = param.fileName || ''\n          body += `    '${param.name}': '${fileName || value}',\\n`\n        }\n        body += '  };\\n\\n'\n      } else if (normalizedRequest.postData.mimeType === 'application/octet-stream') {\n        body = `  final body = '${normalizedRequest.postData.text}';\\n\\n`\n      }\n    }\n\n    if (body) {\n      code += body\n    }\n\n    // Handle method and request\n    const method = normalizedRequest.method.toLowerCase()\n    const headersPart = Object.keys(headers).length > 0 ? ', headers: headers' : ''\n    const bodyPart = body ? ', body: body' : ''\n    code += `  final response = await http.${method}(Uri.parse('${url}')${headersPart}${bodyPart});\\n`\n    code += '  print(response.body);\\n'\n    code += '}'\n\n    return code\n  },\n}\n"],
  "mappings": "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",
  "names": []
}
