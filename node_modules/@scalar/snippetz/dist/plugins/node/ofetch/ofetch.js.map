{
  "version": 3,
  "sources": ["../../../../src/plugins/node/ofetch/ofetch.ts"],
  "sourcesContent": ["import type { Plugin } from '@scalar/types/snippetz'\n\nimport { objectToString } from '@/libs/javascript'\n\n/**\n * node/ofetch\n */\nexport const nodeOfetch: Plugin = {\n  target: 'node',\n  client: 'ofetch',\n  title: 'ofetch',\n  generate(request) {\n    // Defaults\n    const normalizedRequest = {\n      method: 'GET',\n      ...request,\n    }\n\n    // Normalization\n    normalizedRequest.method = normalizedRequest.method.toUpperCase()\n\n    // Reset fetch defaults\n    const options: Record<string, any> = {\n      method: normalizedRequest.method === 'GET' ? undefined : normalizedRequest.method,\n    }\n\n    // Query\n    if (normalizedRequest.queryString?.length) {\n      options.query = Object.fromEntries(normalizedRequest.queryString.map((q) => [q.name, q.value]))\n    }\n\n    // Headers\n    if (normalizedRequest.headers?.length) {\n      options.headers = {}\n\n      normalizedRequest.headers.forEach((header) => {\n        options.headers![header.name] = header.value\n      })\n    }\n\n    // Cookies\n    if (normalizedRequest.cookies?.length) {\n      options.headers = options.headers || {}\n\n      normalizedRequest.cookies.forEach((cookie) => {\n        options.headers!['Set-Cookie'] = options.headers!['Set-Cookie']\n          ? `${options.headers!['Set-Cookie']}; ${cookie.name}=${cookie.value}`\n          : `${cookie.name}=${cookie.value}`\n      })\n    }\n\n    // Remove undefined keys\n    Object.keys(options).forEach((key) => {\n      if (options[key] === undefined) {\n        delete options[key]\n      }\n    })\n\n    // Add body\n    if (normalizedRequest.postData) {\n      // Plain text\n      options.body = normalizedRequest.postData.text\n\n      // JSON\n      if (normalizedRequest.postData.mimeType === 'application/json') {\n        options.body = JSON.parse(options.body)\n      }\n    }\n\n    // Transform to JSON\n    const jsonOptions = Object.keys(options).length ? `, ${objectToString(options)}` : ''\n\n    // Code Template\n    return `import { ofetch } from 'ofetch'\n\nofetch('${normalizedRequest.url}'${jsonOptions})`\n  },\n}\n"],
  "mappings": "AAEA,SAAS,sBAAsB;AAKxB,MAAM,aAAqB;AAAA,EAChC,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,SAAS,SAAS;AAEhB,UAAM,oBAAoB;AAAA,MACxB,QAAQ;AAAA,MACR,GAAG;AAAA,IACL;AAGA,sBAAkB,SAAS,kBAAkB,OAAO,YAAY;AAGhE,UAAM,UAA+B;AAAA,MACnC,QAAQ,kBAAkB,WAAW,QAAQ,SAAY,kBAAkB;AAAA,IAC7E;AAGA,QAAI,kBAAkB,aAAa,QAAQ;AACzC,cAAQ,QAAQ,OAAO,YAAY,kBAAkB,YAAY,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;AAAA,IAChG;AAGA,QAAI,kBAAkB,SAAS,QAAQ;AACrC,cAAQ,UAAU,CAAC;AAEnB,wBAAkB,QAAQ,QAAQ,CAAC,WAAW;AAC5C,gBAAQ,QAAS,OAAO,IAAI,IAAI,OAAO;AAAA,MACzC,CAAC;AAAA,IACH;AAGA,QAAI,kBAAkB,SAAS,QAAQ;AACrC,cAAQ,UAAU,QAAQ,WAAW,CAAC;AAEtC,wBAAkB,QAAQ,QAAQ,CAAC,WAAW;AAC5C,gBAAQ,QAAS,YAAY,IAAI,QAAQ,QAAS,YAAY,IAC1D,GAAG,QAAQ,QAAS,YAAY,CAAC,KAAK,OAAO,IAAI,IAAI,OAAO,KAAK,KACjE,GAAG,OAAO,IAAI,IAAI,OAAO,KAAK;AAAA,MACpC,CAAC;AAAA,IACH;AAGA,WAAO,KAAK,OAAO,EAAE,QAAQ,CAAC,QAAQ;AACpC,UAAI,QAAQ,GAAG,MAAM,QAAW;AAC9B,eAAO,QAAQ,GAAG;AAAA,MACpB;AAAA,IACF,CAAC;AAGD,QAAI,kBAAkB,UAAU;AAE9B,cAAQ,OAAO,kBAAkB,SAAS;AAG1C,UAAI,kBAAkB,SAAS,aAAa,oBAAoB;AAC9D,gBAAQ,OAAO,KAAK,MAAM,QAAQ,IAAI;AAAA,MACxC;AAAA,IACF;AAGA,UAAM,cAAc,OAAO,KAAK,OAAO,EAAE,SAAS,KAAK,eAAe,OAAO,CAAC,KAAK;AAGnF,WAAO;AAAA;AAAA,UAED,kBAAkB,GAAG,IAAI,WAAW;AAAA,EAC5C;AACF;",
  "names": []
}
