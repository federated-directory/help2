{
  "version": 3,
  "sources": ["../../../../src/plugins/http/http11/http11.ts"],
  "sourcesContent": ["import type { Plugin } from '@scalar/types/snippetz'\n\n/**\n * http/http1.1\n */\nexport const httpHttp11: Plugin = {\n  target: 'http',\n  client: 'http1.1',\n  title: 'HTTP/1.1',\n  generate(request) {\n    // Defaults\n    const normalizedRequest = {\n      method: 'GET',\n      headers: [],\n      queryString: [],\n      ...request,\n    }\n\n    // Normalize method\n    normalizedRequest.method = normalizedRequest.method.toUpperCase()\n\n    // Parse URL with error handling\n    let url\n    let path\n    try {\n      url = new URL(normalizedRequest.url || 'http://')\n      path = url.pathname + (url.search || '')\n    } catch (_error) {\n      // Oops, got an invalid URL, use the provided URL directly.\n      path = normalizedRequest.url || '/'\n    }\n\n    const hostname = url?.hostname || 'UNKNOWN_HOSTNAME'\n\n    // Start building the request\n    let requestString = `${normalizedRequest.method} ${path} HTTP/1.1\\r\\n`\n\n    // Handle query string parameters\n    if (normalizedRequest.queryString.length) {\n      const queryString = normalizedRequest.queryString\n        .map((param) => `${encodeURIComponent(param.name)}=${encodeURIComponent(param.value)}`)\n        .join('&')\n\n      // Append query string to the path\n      requestString = `${normalizedRequest.method} ${path}?${queryString} HTTP/1.1\\r\\n`\n    }\n\n    // Store all headers\n    const headers = new Map()\n\n    // Host header\n    headers.set('Host', hostname)\n\n    // Passed headers\n    normalizedRequest.headers.forEach((header) => {\n      if (headers.has(header.name)) {\n        headers.set(header.name, `${headers.get(header.name)}, ${header.value}`)\n      } else {\n        headers.set(header.name, header.value)\n      }\n    })\n\n    // Query string parameters\n    if (normalizedRequest.queryString.length) {\n      const queryString = normalizedRequest.queryString\n        .map((param) => `${encodeURIComponent(param.name)}=${encodeURIComponent(param.value)}`)\n        .join('&')\n\n      // Append query string to the path\n      requestString = `${normalizedRequest.method} ${path}?${queryString} HTTP/1.1\\r\\n`\n    }\n\n    // Request body\n    let body = ''\n    if (normalizedRequest.postData) {\n      // Always set the Content-Type header based on postData.mimeType\n      if (normalizedRequest.postData.mimeType === 'application/json' && normalizedRequest.postData.text) {\n        headers.set('Content-Type', 'application/json')\n        body = normalizedRequest.postData.text\n      } else if (\n        normalizedRequest.postData.mimeType === 'application/octet-stream' &&\n        normalizedRequest.postData.text\n      ) {\n        headers.set('Content-Type', 'application/octet-stream')\n        body = normalizedRequest.postData.text\n      } else if (\n        normalizedRequest.postData.mimeType === 'application/x-www-form-urlencoded' &&\n        normalizedRequest.postData.params\n      ) {\n        const formData = normalizedRequest.postData.params\n          .map((param) => `${encodeURIComponent(param.name)}=${encodeURIComponent(param.value ?? '')}`)\n          .join('&')\n\n        headers.set('Content-Type', 'application/x-www-form-urlencoded')\n        body = formData\n      } else if (normalizedRequest.postData.mimeType === 'multipart/form-data' && normalizedRequest.postData.params) {\n        const boundary = '----WebKitFormBoundary7MA4YWxkTrZu0gW'\n        headers.set('Content-Type', `multipart/form-data; boundary=${boundary}`)\n\n        body =\n          normalizedRequest.postData.params\n            .map((param) => {\n              if (param.fileName) {\n                return `--${boundary}\\r\\nContent-Disposition: form-data; name=\"${param.name}\"; filename=\"${param.fileName}\"\\r\\n\\r\\n`\n              }\n              return `--${boundary}\\r\\nContent-Disposition: form-data; name=\"${param.name}\"\\r\\n\\r\\n${param.value}\\r\\n`\n            })\n            .join('') + `--${boundary}--\\r\\n`\n      }\n    }\n\n    // Add headers to requestString\n    headers.forEach((value, name) => {\n      requestString += `${name}: ${value}\\r\\n`\n    })\n\n    // Add body to requestString\n    requestString += `\\r\\n${body}`\n\n    return requestString\n  },\n}\n"],
  "mappings": "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",
  "names": []
}
